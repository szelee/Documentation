<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CbeTOService Class</title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="CbeTOService class" /><meta name="System.Keywords" content="Vix.Cbe.WebService.CbeTOService class" /><meta name="Microsoft.Help.F1" content="Vix.Cbe.WebService.CbeTOService" /><meta name="Microsoft.Help.Id" content="T:Vix.Cbe.WebService.CbeTOService" /><meta name="Description" content="Provides methods to interact with the CBE for Ticket Office retail channel." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Vix.Cbe.WebService" /><meta name="file" content="84478d73-23dd-1bcd-02c4-86dcf17efc65" /><meta name="guid" content="84478d73-23dd-1bcd-02c4-86dcf17efc65" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.5.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Central Booking Engine Class Library<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine Class Library" tocid="roottoc">Central Booking Engine Class Library</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine" tocid="e7529a28-e260-e3d8-0718-b3fc28f03686">Central Booking Engine</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/26210088-6c4f-d952-a0af-51ddaeac4a15.htm" title="Vix.Cbe.WebService" tocid="26210088-6c4f-d952-a0af-51ddaeac4a15">Vix.Cbe.WebService</a></div><div class="toclevel1 current" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/84478d73-23dd-1bcd-02c4-86dcf17efc65.htm" title="CbeTOService Class" tocid="84478d73-23dd-1bcd-02c4-86dcf17efc65">CbeTOService Class</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/29b9a2ca-c12b-5f6b-16e5-4bae34b34806.htm" title="CbeTOService Constructor " tocid="29b9a2ca-c12b-5f6b-16e5-4bae34b34806">CbeTOService Constructor </a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/18f27a41-6185-e561-a27a-1140a1317471.htm" title="CbeTOService Methods" tocid="18f27a41-6185-e561-a27a-1140a1317471">CbeTOService Methods</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>CbeTOService Class</h1></td></tr></table><span class="introStyle"></span> <div class="summary">
            Provides methods to interact with the CBE for Ticket Office retail channel.
            </div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Inheritance Hierarchy</span></div><div id="ID0RBSection" class="collapsibleSection"><a href="https://docs.microsoft.com/dotnet/api/system.object" target="_blank" rel="noopener noreferrer">System<span id="LST1433222_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1433222_0?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Object</a><br />  <span class="selflink">Vix.Cbe.WebService<span id="LST1433222_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1433222_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CbeTOService</span><br /></div><p> </p>
    <strong>Namespace:</strong> 
   <a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService</a><br />
    <strong>Assembly:</strong>
   Vix.Cbe.WebService (in Vix.Cbe.WebService.dll) Version: 0.1.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID2RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EACA');return false;" title="Copy">Copy</a></div></div><div id="ID1EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">[<span class="identifier">ServiceBehaviorAttribute</span>(Namespace = "http://vixtechnology.com/cbe/2012-05-29")]
[<span class="identifier">PerformanceCounterAttribute</span>(<span class="keyword">true</span>, <span class="keyword">typeof</span>(<span class="identifier">ServiceMethodPerformanceCounter</span>), "CBE-Endpoint.V7", 
	"TicketOffice")]
<span class="keyword">public</span> <span class="keyword">class</span> <span class="identifier">CbeTOService</span> : <span class="identifier">ICbeTOService</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EACA");</script></div><p>The <span class="selflink">CbeTOService</span> type exposes the following members.</p><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Constructors</span></div><div id="ID3RBSection" class="collapsibleSection"><table class="members" id="constructorList"><tr><th class="iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="29b9a2ca-c12b-5f6b-16e5-4bae34b34806.htm">CbeTOService</a></td><td><div class="summary">Initializes a new instance of the <span class="selflink">CbeTOService</span> class</div></td></tr></table><a href="#PageHeader">Top</a></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Methods</span></div><div id="ID4RBSection" class="collapsibleSection"><table class="members" id="methodList"><tr><th class="iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="4a4c43e0-6462-c10a-fc45-902efff4ba19.htm">AmendReservation</a></td><td><div class="summary"><p>
               This FEWS allows a passenger to amend an existing reservation either before the sale is completed or afterwards.
            </p><p /><p>
               The existing reserved seats may be selectively changed by seat picks or by seat preferences. Advance tickets may only be changed by the TOC running the train and cannot be changed to a different train.
            </p><p>
               Flexible tickets may be changed to different seats on the same train, or to a different train on the same day.For changing to a different train it is assumed that the FEA will perform journey planning (FEWS 2.1) to check trains for which the chosen ticket type is valid.
            </p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="06f7a457-0c40-9046-9de8-2cf65c7500f0.htm">CalculateRefundValue</a></td><td><div class="summary"><p>
                This FEWS enables the Operator to request an automated calculation of the refund value for season tickets or
                point to point tickets using a refund type code (see notes below). The record is locked when this request is made
                to the CBE. The refund types codes are set by the operator to be used to determine how the refund is
                calculated by the CBE. The codes are provided in the notes below and cover:
                <ol><li>Unused or part used P2P refunds, </li><li>P2P delay repay refunds, </li><li>season ticket part unused refunds</li><li>season ticket delay repay refunds</li><li>rover and ranger refunds</li><li>plusbus refunds</li><li>previously changed over season ticket requests for refunds</li><li>car park refunds</li><li>day travelcard refunds</li><li>group ticket refunds</li><li>incomplete journey refunds</li></ol></p><p>
                The call also allows an operator to enter the of a refund for a car parking ticket, as this is a manual calculation.
            </p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="4cf3ceb8-14c2-e391-eb31-310718cf1f00.htm">CancelReservation</a></td><td><div class="summary">
            This call triggers a cancel reservation request to NRS for all previously booked reservable items included in an NRS booking reference and also for reservations removed from a basket before a sale is completed.   The FEWS supports Call Centre and Ticket Office retail channels only and be used in a variety of use cases not already covered by existing functionality.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="f60a3524-67aa-a0a9-bdb6-fdfbbe9dc4f3.htm">ChangeOperatorPassword</a></td><td><div class="summary">
            Changes the operator password.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="95fe3795-cfa5-4f17-23a6-6d9955b0b895.htm">ConfirmFareForRefund</a></td><td><div class="summary">
            This call takes provides the CBE with the correct fare to use when calculating a refund where there has been more than one available, as previously advised to the FEA by FEWS 9.1.1 output. The call is required where refunds involving group stations which more than fare for the origin/location station. This FEWS is also required where the trained operator needs to advise the CBE on which fare to use a partial season ticket refund is requested for which there is more than one fare type. This call starts with a lock on the refund record(FEWS9.1), when the refund is in state “CalculationInProgress” and unlocks it on completion of the response with status change to ‘CalculationCompleted’. And then unlocks it on completion of the response.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="0afd0493-9362-077c-d296-f1c21ec1640b.htm">CreateCustomerProfile</a></td><td><div class="summary">
            This case creates the customer account record in the CBE database.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="4305ea38-baab-6b7f-4629-d6cccf4a2a42.htm">CustomerCardLogin</a></td><td><div class="summary">
            Logs in the user specified via smartcard or photocard.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="1024e4dc-9732-82b4-f168-246b1cf72fee.htm">DoNonissue</a></td><td><div class="summary">
            This FEWS sends a non-issue message to the CBE in case of a problem issuing CCST ticket at the Ticket Office,  Call Centre, or On Board, so that the ticket coupons can subsequently be cancelled and the transaction reversed in Lennon (by a non-issue record).
            The non issue value is used to indicate the type of problem with the ticket being resolved.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="c40e4f27-8ed4-f07d-3992-34382987f5e5.htm">GetCoachesInformation</a></td><td><div class="summary">
            GThis FEWS returns details of all the coaches available on a train (RSID) for a single journey leg from NRS.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="41455838-1475-c90c-0d6d-51d59a0c40fd.htm">GetCoachesSeatAvailability</a></td><td><div class="summary">
            This FEWS shall return all available seats for a maximum of 3 coaches for a train (RSID) associated with a journey leg. The FEWS shall request NRS and return the NRS response for available seats.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="8dfafb80-fe1d-7a68-4b0a-55fd10a0a5b6.htm">GetCtrDetails</a></td><td><div class="summary">
            The purpose of this FEWS is to enable a Ticket Office operator the ability to recall a previously purchased ToD ticket via a Transaction Reference (CTR Ref) and to validate that the ToD has not already been printed. It also allows the operator to find one or more CTRs using other fields where customer does not have his CTR number.  It also includes a check of the payment card used in the LSM database against that supplied in the input. The call also allows the operator to amend the locking status of a CTR which it has issued and where it has been locked and remains locked due to a printing issue.Changing of lock status parameter will explicitly change the lock status of CTR record on condition that CBE has permission to do it.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="58466bc8-7ce6-4db2-2d11-74ac6ca8319a.htm">GetCustomerAccountDetails</a></td><td><div class="summary">
            This case allows the customer to retrieve their account details stored in the CBE database.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="14590662-fc9e-3d6b-9c8d-33de020854c6.htm">GetFaresInformation</a></td><td><div class="summary">
            This call returns timetable and fares information for services from IPTIS. The call will typically be repeated a number of times to include earlier and later timeband calls and other timetable and fares information requests.The output includes available Advance quota controlled fares where mandatory reservations are required and Accompanied fares where available.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="df216370-8c11-8fb6-e6fd-278d9e0439d0.htm">GetOptionalServices</a></td><td><div class="summary">
            Gets the optional services.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="eaced294-1339-5b02-e112-eb716735e588.htm">GetPresalesFulfilmentOptions</a></td><td><div class="summary">
            This call provides the fulfilment options and occurs after the customer has selected the service and fare that they wish to book with the CBE returning the list of available fulfilment options. The FEWS covers both point-to-point, season tickets, and parking tickets.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="6ab4886b-7063-5038-1d2b-81a7750fc8fc.htm">GetRefundApplication</a></td><td><div class="summary">
            This FEWS supports the Operator to retrieve a specific refund application, which is new or in progress, to be processed.
            This is required so that the operator can view the refund record and decide what type of refund is
            required (in the next call FEWS 9.1.1).
            This call will be required also by ticket office staff to process a refund once the application has been
            created on the CBE database.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="5ca47790-e4ca-2704-5815-e17ea8cca875.htm">GetRefundList</a></td><td><div class="summary"><p>
                This FEWS supports the operator with suitable permissions for refund to retrieve the list of refunds
                from the database filtered by input parameters to get the associated detailed information in order
                to review the refunds (FEWS 9.2). It allows the operator to retrieve refunds by a designated Refund search criteria.
                <ol><li>refund state</li><li>refund number</li><li>operator</li><li>customer</li></ol>
                It also allows the Operator to select the page size and number of items on each page, to manage the potentially large output.
            </p><p>
                This call has been extended to allow web/mobile customers to use this call to check the status of their refunds.
            </p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="e519d1d6-5e33-a550-a422-a58bbf787275.htm">GetRefundList2</a></td><td><div class="summary"><p>This FEWS supports the operator with suitable permissions for refund to retrieve the list of refunds from the database filtered by input parameters to get the associated summary information in order to review the refunds (FEWS 9.2). It allows the operator to retrieve refunds by a designated Refund search criteria.</p><ul><li>Refund state</li><li>Refund sub-status</li><li>refund Number, or</li><li>by operator</li><li>by customer</li></ul><p>It also allows the Operator to select the page size and number of items on each page, to manage the potentially large output.</p><p>This call has been extended to allow web/mobile customers to use this call to check the status of their refunds.</p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="563640d4-ea5a-876a-e613-566f0d895baf.htm">GetReservationAvailability</a></td><td><div class="summary">
            This call requests the available reservation options for a journey from NRS, which can then be offered to the customer, prior to a reservation booking request being made.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="07abb054-cef4-b733-65e4-4b6377517a18.htm">GetReservationServiceDetails</a></td><td><div class="summary">
            This Call Centre requests reservation details associated with a service in order to allow meaningful availability enquiries and reservation requests. This enquiry could be a precursor to performing an NRS Availability Enquiry or Reservation Request.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="20e46ae4-9e83-74bb-7e79-fab35ff90c7c.htm">GetRouteInformation</a></td><td><div class="summary">
            This is the initial journey query for route and timetable information. It will return the number of services available within a configurable timeband for the journey requested.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="ebe47095-2a84-6320-3ebd-124202d9f09c.htm">GetSalesBySalesPoint</a></td><td><div class="summary">
            This call will allow an operator at a ticket office to find a walk up sale made at a designated TVM or Ticket Office sales point location in a designated time period.
            This call is required to assist ticket office staff to deal with issues at a TVM or other sales point in the station, where the printer may fail in some way and the fulfilment cannot be completed.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="c7ae9249-3c27-1dfa-5406-4dcdc40d5201.htm">GetSalesHistory</a></td><td><div class="summary">
            This request returns a summary list of customer sales transactions by purchase date or by journey departure date. The response includes summary information to allow identification of an individual sales transaction to support a detailed Sales History enquiry. (See FEWS 4.3.1).
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="3640fb58-8728-0eec-cbfa-8c091bd4330f.htm">GetSalesTransactionDetails</a></td><td><div class="summary"><p>This is a request which will retrieve the details of a specific customer sales transaction. This call includes details for all purchased items in a single sales transaction including:</p><ul><li>Season and Point to Point tickets</li><li>Reissued season ticket</li><li>Car parking</li><li>Reservation purchases and details of these</li><li>eVouchers</li><li>Railcards</li><li>other associated items</li><li>payment details for the purchase</li><li>fulfilment status details</li></ul></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="c4fe27ff-990d-6185-df8c-920bfbdae049.htm">GetSeasonTicketFares</a></td><td><div class="summary">
            Gets the season ticket fares.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="4a568000-598c-00cb-7b70-5682eaacb431.htm">GetStoppingPatterns</a></td><td><div class="summary">
            This is an information request; the call is required to retrieve details of stopping patterns
            from IPTIS for a chosen train service. The output lists all stops between a chosen origin and destination
            and the timing of these. This should be available to all retail channels.  The input of the call typically
            uses the required train service data returned from Journey Planning call 2 (FEWS 2.1).
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="76c6f987-4c12-6cfb-ca0e-52580ad46016.htm">MagStripeCheck</a></td><td><div class="summary">The purpose of this FEWS is to allow the an operator at a ticket office or call centre to check if the magnetic stripe encoding on the CCST ticket matches the ticket being requested to be non issued.  This FEWS returns a Print Status Number as a reference to the following call to Mag Stripe Check Status Response FEWs9.7.1.1, with the details for checking by the CBE.</div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="2eb4e42e-2d4d-e2c7-3273-12e008282e15.htm">MagStripeCheckStatus</a></td><td><div class="summary">
            The purpose of this FEWS is to allow an operator at a ticket office or call centre to check the result of the Mag Stripe Check FEWS 9.7.1 by the CBE.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="c6a9009d-8453-b080-43ec-140af6625293.htm">OperatorLogin</a></td><td><div class="summary">
            Logs in the operator specified in the service request.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="6b3010db-6120-eb1c-5209-e13871e306f2.htm">OperatorLogout</a></td><td><div class="summary">
            Operators the logout.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="c58f536a-0e28-be05-eefb-08c3c92d11b1.htm">Overprint</a></td><td><div class="summary"><p>The purpose of this FEWS is to allow the operator to request an overprint message to be sent to the printer at their workstation, so that the ticket can be overprinted with the appropriate print message. The operator will have inserted the ticket into the printer prior to sending this request.</p><p>It is intended that this FEWS can be used in a range of cases where an overprint is required, for non-issue overprints (voids) and for refund overprints (cancelled) and when tickets are replaced, to cancel the original tickets.</p><p>This FEWS returns a Print Status Number as a reference to use in the following call to Request Overprint Message Status FEWs9.7.2.1.</p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="cf4e9596-4cb1-5f6e-ceda-4a404b1f77a3.htm">OverprintConfirmation</a></td><td><div class="summary">
            The purpose of this FEWS is to allow the operator to confirm that the overprinting of the ticket coupons has been successful. In the case of a non-issue event this then triggers the creation of the non-issue record in SDCI+ by the CBE.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="2590c879-34f2-a7a5-a5db-72b9d57553fb.htm">OverprintStatus</a></td><td><div class="summary">
            The purpose of this FEWS is to allow the operator to check the result of Request Overprint Message FEWS 9.7.2, so that they know when the printer is ready to overprint the ticket being non issued.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="0ca774c5-2500-4e83-9215-3eba17725028.htm">PaymentRefund</a></td><td><div class="summary">
            This FEWS returns the confirmation/or failure of the payment of a refund or payment for delay repay.
            The refund payment process is the final step in the refund process.It is dependent on the operator to decide on the method of payment and to provide the details to the CBE via the FEA.
            If it is a card refund, then it is handled by the front end application using a 3rd party payment provider.The Front End Application, via this FEWS provides the acknowledgement of the refund payment authorisation detail to the CBE.Or where there is a failure to complete the refund, it provides the failure details.For other MOPs the data required depends on the MOP to be used as shown below.
            On receipt of this FEWS and successful processing this triggers the refund state to be completed or failed depending on the response from the PSP. On payment successful the SDCI is then created for refund and an email is issued to the customer informing them of the refund.A failure sets the refund status to “RefundFailed” and will be dealt with manually and this call may be repeated until the refund payment is successful.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="02e6a254-b4be-07e2-8883-00c66dba2c5f.htm">ProcessRefundApplication</a></td><td><div class="summary">
            This FEWS enables the Operator to update the Refund Request database with the results of a manual review of a refund claim. This may be an authorisation or rejection. The refund should be in the state of CalculationComplete.
            This call starts with a lock on the refund record (FEWS 9.1) and unlocks it on completion of the response.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="e2dbc73f-96c7-64ac-1a33-c0d35a521791.htm">PurchaseConfirmation</a></td><td><div class="summary">
            This case completes the sale with the payment confirmation details for Point to Point, season tickets,
            railcard sales and Gift eVouchers. (Gift eVouchers are not mixed with other products in a sales
            transaction.) The FEWS provides all the remaining data for fulfilment activities and settlement and
            moves the sales transaction status from Awaiting authorization to Confirmed.
            The FEWS also supports purchase confirmation of a season ticket changeover done by rebook and
            refund.In this case a refund reference number is present in the input.
            This case also allows the FEA to request SMS messages of the itinerary of Point to Point journeys.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="baca4d31-b3aa-78d6-75e5-0ab12643a7d6.htm">PurchaseExcessFare</a></td><td><div class="summary">
            Purchases the excess fare.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="a6df9ffd-3e12-9933-c358-e3350b2efe39.htm">PurchaseExcessSeasonFare</a></td><td><div class="summary">
            Purchases the excess season fare.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="4c93bdbc-43de-fdce-b7fb-c22d5f998827.htm">PurchaseRailcard</a></td><td><div class="summary">
            This call from the FEA (Ticket office only), requests the purchase of a railcard using the previous call for railcard and price details from FEWS 10.6. On completion of this request a payment is made using FEWS6.2 and the railcard is issued.
            This FEWS also supports railcard renewals up to 1 month before the previous railcard expires.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="6e9c80cd-5278-0776-b896-d5c5f8905b22.htm">PurchaseRailcardReplacement</a></td><td><div class="summary">
            This is the next step after FEWS 12.2 request a railcard replacement, this call includes the payment charge determined by the operator and creates the pending sales transaction with appropriate reason code prior to confirmation using FEWS 6.2.
            This event typically occurs at a ticket office only, as an instant replacement/duplicate ticket is required for immediate travel.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="f00ac7fb-83ac-1ba2-0894-4989941db55c.htm">PurchaseRangerRover</a></td><td><div class="summary">
            Ranger/rover purchase.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="93ef7761-a2c3-8e94-f314-c5384add38b7.htm">PurchaseReservation</a></td><td><div class="summary"><p>
                The purpose of this FEWS is to ‘purchase’ a reservation made with or without a ticket sale.
            </p><p><b>Ticket Office</b></p><p>
                This case arises when the customer has already purchased a ticket without a reservation and
                then requests one by means of FEWS 8.1. The ticket office application will make no attempt to
                identify the CBE transaction – indeed the reservation may be for a non-CBE ticket.There is no
                validation that the reservation made (via FEWS 8.1) is valid for the journey of the customer’s
                travel ticket
                The customer is required to produce their ticket as evidence of a purchase to avoid reservations
                being made without a valid travel ticket.
                It is up to the ticket office staff to ensure that a correct reservation is made.
            </p><p><b>Web, Mobile and Call-Centre</b></p><p>
                This is for adding reservations to existing CBE journey transactions only, or where a bike reservation
                is being associated with a journey transaction for which a seat reservation booking reference has already been associated with the transaction.
                It also allows reservations to be purchased for journeys which have not been booked through CBE.
            </p><p>
                For adding seat reservations to existing journey transactions the transaction needs to be identified by Transaction and Journey Number.
                This is to allow the CBE journey transaction to be updated correctly.
                It also allows a certain amount of validation to be performed that the reservations made are valid for the journey.
                The journey that the reservation is required for must be valid with the associated ticket purchased.
            </p><p>
                For adding bike reservations to a journey transaction which already has a seat reservation associated with it,
                the transaction number and item number of the journey transaction basket item should be provided.
                These will be used to associate the bike reservation transaction with the journey transaction via a ‘transaction pairing’.
            </p><p>
                For obtaining seat reservations to support journeys not booked through CBE, TransactionNumber and ItemNumber should not be populated.
            </p><p>
                The reservation is for either a seat (with seating preferences included), or for a bike.
                In both cases, for the Ticket Office the customer is required to produce their ticket as evidence of
                a purchase to avoid reservations being made without a valid travel ticket.
            </p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="24cab9ae-9808-57fe-614f-fb9e9dd3ea58.htm">PurchaseSeasonTicket</a></td><td><div class="summary"><p>This FEWS takes the data from FEWS 5.0 <a href="c4fe27ff-990d-6185-df8c-920bfbdae049.htm">GetSeasonTicketFares(SeasonTicketFaresMessageRequestAuthV1)</a> and validates the sale prior to payment authorisation and puts the sale into a pending state awaiting FEWS 6.2 payment confirmation. A season ticket request is made for one passenger only.</p><p>This version supports the phase 3 functionality for the purchase of a season ticket renewal with fulfilment by CCST or smart, both of which are solely Ticket Office functions.</p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="dc5478c8-7d00-a722-210a-773d0c20b5cd.htm">PurchaseTicket3</a></td><td><div class="summary">
            This call is used by all retail channels.
            It validates the sale prior to the payment and creates the sale transaction record.
            The sale is put into a pending state awaiting payment confirmation, (FEWS 6.2).
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="302a5b8d-3db1-01aa-b472-734b172f104a.htm">RedeemTravelPass</a></td><td><div class="summary"><p>This call allowing to redeem one day travel pass for flexi season ticket in his 28day period of validity based on parameters specified in the request:</p><p>  Customer id</p><p>  Flexi-Season transaction number against which the travel pass is being redeemed</p><p>  Required travel datetime</p><p>  Transaction numbers for any existing reservations that need to be paired with the travel pass</p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="f2d14251-944f-0ec1-c8da-8c3e8459353f.htm">Refund</a></td><td><div class="summary"><p>Request a refund for a journey.</p><p>This case allows the customer to request, via the front end application, a refund for a journey previously booked. The request may be, for a refund for part of a journey, or a whole journey.</p><p>A refund request is generated and the sales transaction record is updated with the refund reference. A completed refund form is then generated by the FEA with details of the refund request pre-populated. The customer is required to print the form and attach tickets where collected, and post tickets and form to the refund administration centre for processing.</p><p>This FEWS also allows a customer support/refund operator to submit a refund where a paper refund application has been received which may or may not be is not on the designated refund form. (See assumption 1).</p><p>This FEWS has been updated for the ticket office and to allow delay repay season ticket refunds to be requested. In addition to season ticket refunds this FEWS has been extended to include refund of plusbus tickets associated with rail ticket refunds.</p><p>The FEWS also includes the ability to request a car parking refund.</p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="da044df7-8419-6f44-c5c5-1ab642a170d1.htm">RefundUpdate</a></td><td><div class="summary">
            Update the refund record with additional information
            This FEWS allows the Operator to make an update to a specific refund record, which is in refund state ‘in progress’.  This is required so that the operator can input or amend data into the refund record to:
            Insert ticket numbers, which may not have been available when the refund record was created.This includes updates for TOD tickets from the physical tickets now available with ticket numbers supplied.
            Amend ticket number where incorrect
            Capture the data to identify the ticket for refund and also to get the data required for the SDCI BS record. This FEWS is required when the ticket has been issued by another TIS (TOD issue).
            Allows the operator to update the review notes and optionally add a next review date.
            Add details associated with Delay repay of P2P or season tickets
            The FEWS contain provision for refund of foreign tickets (not sold by the CBE), as this is now required for the CZ channel
            This call starts with a lock on the refund record(FEWS9.1) and unlocks it on completion of the response.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="368ca0c5-c517-b418-22d3-a19cf5058db6.htm">RegisterPrintServer</a></td><td><div class="summary">
            Registers the print server.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="ad75b284-49cf-f5c7-8a4b-7b4eabf2c252.htm">RegisterTomPrinter</a></td><td><div class="summary">
            Registers the TOM printer.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="68ebcfd1-f7c1-ce58-e70b-87528b8de16a.htm">Reissue</a></td><td><div class="summary">
            The purpose of this FEWS is to allow the operator to request a reissue of ticket which has previously been non-issued. This call to the CBE will then result in a print message request to the Parkeon print server to reprint the ticket to the operator’s sales point printer.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="82009399-670a-dd1c-40e4-2f37da03a812.htm">RejectRefund</a></td><td><div class="summary">
            The purpose of this FEWS is to reject the refund application following a validation failure (FEWS 9.1.4). This FEWS is currently applicable to ETickets (Self-print and M-Tickets).
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="8e05489b-20fb-7f79-1404-2f87c0fb9a57.htm">RequestItinerary</a></td><td><div class="summary">
            Gets the itinerary details.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="da85e34f-d61d-84ea-d81f-9e118c0518d5.htm">RequestRailcardReplacement</a></td><td><div class="summary">
            This task is the first step in the request for a replacement railcard ticket, in the case where the original CCST ticket has been damaged or spoilt, or lost, or stolen.  This may also occur where the original ticket has been returned for re issue due to printing quality of the CCST ticket.  Replacements may also be required where a new photocard has been issued which is referenced by the Railcard.
            The output retrieves and verifies the original ticket details provided and advises on the current replacement count and any charge that may be applicable.
            This event typically occurs at a ticket office only, as an instant replacement ticket is required for immediate travel.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="aa5a200d-2054-0bee-7a09-2f92f39fc41f.htm">RequestSeasonTicketChangeoverPurchase</a></td><td><div class="summary"><p>
            This FEWS is used to get either the fare for the new journey when a changeover of a season ticket is required, or to purchase the new ticket for the new journey as part of a changeover process.  It is done at a ticket office or via the CC. The fare for the new ticket is calculated using the base rate as described in FEWS 9.9. On completion of this FEWS the purchase of the ticket can be made with FEWS 6.2.
            </p><p>
            The changeover is done by means of rebook(new journey) and refund(the old journey by means of FEWS 9.9.
            </p><p>
            The request may be for a changeover for a change of journey, route or class of travel or combination of these.This also includes changes from a Season Ticket to a Travelcard or vice-versa.
            </p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="9265d4a2-151b-12bc-dfe9-50e28edc2627.htm">RequestSeasonTicketChangeoverRefund</a></td><td><div class="summary"><p>
            This FEWS is triggered whenever a season ticket changeover is requested at a Ticket Office or via the Call Center.
            This FEWS covers the refund part of the rebook and refund process which is a refund of the unused part of the original ticket.
            Unlike other refunds the calculation is based on the ‘base rate’. Depending on the Changeover refund response flag value the
            output will either be the refund value (= True), or the refund value and refund reference number for the refund application created. (= False).
            If a refund record is created the CBE will lock the record so that the operator can complete the refund process.
            </p></div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="44c78355-29e0-fbed-1b86-41171d1d23a4.htm">ReservationBooking</a></td><td><div class="summary">
            This call triggers a reservation request to NRS. Optionally, reservation request can contain additional reservable items - bike places, seating preferences or requirement for specific seat in the train. The FEWS supports, public facing, unattended TIS such as Web TVM or Mobile retail channels as well as attended TIS such as Call Centre or Ticket Office retail channels.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="f5e07dcd-b0a3-db82-85b5-f885ba6b66f7.htm">ReservationBooking2</a></td><td><div class="summary">
            This call triggers a reservation request to NRS. Optionally, reservation request can contain additional reservable items - bike places, seating preferences or requirement for specific seat in the train. The FEWS supports, public facing, unattended TIS such as Web TVM or Mobile retail channels as well as attended TIS such as Call Centre or Ticket Office retail channels.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="58bcab27-940e-681e-f7f5-5bbebc23fb8d.htm">SearchCustomerProfile</a></td><td><div class="summary">
            This call searches the customer database and returns one or more summary account details to identify the customer details required.
            This call is used to verify that a customer account exists prior to the update and/or view of an account’s details.If the account is not found then this would trigger the creation of a new account via the front end application. (See FEWS 4.7 Customer Account CC Creation).
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="33705698-497c-2a82-7938-2518b5458220.htm">SeasonTicketDuplicate</a></td><td><div class="summary">
            Gets the data for season ticket being duplicated.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="e0f84c45-07fa-2539-0e2d-4264c9dfdbf9.htm">SeasonTicketReissue</a></td><td><div class="summary">
            Does the season ticket reissue.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="5c962ea2-e7f7-0a8b-7098-68141ec037e1.htm">SeasonTicketReplacement</a></td><td><div class="summary">
            Gets the data for season ticket being replaced.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="06239abb-8578-bf03-d082-1591390a057a.htm">UpdateCustomerProfile</a></td><td><div class="summary">
            This case allows the customer to update their account details in the CBE database.
            </div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="dbf530e2-2ec3-f6fc-3e13-38f1da973966.htm">ValidateRefund</a></td><td><div class="summary">
            The purpose of this FEWS is to validate ETickets for Refund and check if the barcode has been scanned at a gate-line or by onboard device. This FEWS validates the refund application not from the refund record but an assessment based on the scan data. This FEWS will be called after the front-end application has called FEWS 9.1 Get Refund Application.
            </div></td></tr></table><a href="#PageHeader">Top</a></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID5RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>