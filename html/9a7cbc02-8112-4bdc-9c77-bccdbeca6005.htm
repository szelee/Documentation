<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CbeWebService.Refund Method </title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="Refund method" /><meta name="System.Keywords" content="CbeWebService.Refund method" /><meta name="Microsoft.Help.F1" content="Vix.Cbe.WebService.CbeWebService.Refund" /><meta name="Microsoft.Help.Id" content="M:Vix.Cbe.WebService.CbeWebService.Refund(Vix.Cbe.WebService.Contracts.SalesTransaction.RefundMessageRequestSpdAuthV1)" /><meta name="Description" content="Request a refund for a journey.This case allows the customer to request, via the front end application, a refund for a journey previously booked. The request may be, for a refund for part of a journey, or a whole journey." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Vix.Cbe.WebService" /><meta name="file" content="9a7cbc02-8112-4bdc-9c77-bccdbeca6005" /><meta name="guid" content="9a7cbc02-8112-4bdc-9c77-bccdbeca6005" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.5.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Central Booking Engine Class Library<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine Class Library" tocid="roottoc">Central Booking Engine Class Library</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine" tocid="e7529a28-e260-e3d8-0718-b3fc28f03686">Central Booking Engine</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/26210088-6c4f-d952-a0af-51ddaeac4a15.htm" title="Vix.Cbe.WebService" tocid="26210088-6c4f-d952-a0af-51ddaeac4a15">Vix.Cbe.WebService</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/dbe63916-3728-a5c7-9333-dd7d99c307bd.htm" title="CbeWebService Class" tocid="dbe63916-3728-a5c7-9333-dd7d99c307bd">CbeWebService Class</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/79896919-9212-d834-bb9f-034a8b293c03.htm" title="CbeWebService Methods" tocid="79896919-9212-d834-bb9f-034a8b293c03">CbeWebService Methods</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5e3aa0da-c2cb-4059-d631-61b7ace9e210.htm" title="AddJourneyToFavourites Method " tocid="5e3aa0da-c2cb-4059-d631-61b7ace9e210">AddJourneyToFavourites Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/34d7f448-41a4-9633-668f-45cc8ab9baff.htm" title="AddUpdateCustomerPhotocard Method " tocid="34d7f448-41a4-9633-668f-45cc8ab9baff">AddUpdateCustomerPhotocard Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/fe53d4b4-5d18-a895-822c-e84af19f3cba.htm" title="AddUpdatePassengerAssistanceDetails Method " tocid="fe53d4b4-5d18-a895-822c-e84af19f3cba">AddUpdatePassengerAssistanceDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/bb0efcb4-605d-2ad1-d791-ac1148d977a7.htm" title="AddUpdateSmartcard Method " tocid="bb0efcb4-605d-2ad1-d791-ac1148d977a7">AddUpdateSmartcard Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/8fd64612-4084-58f5-78bb-a0bd7ddf73c6.htm" title="AddUpdateTokenisedPaymentCard Method " tocid="8fd64612-4084-58f5-78bb-a0bd7ddf73c6">AddUpdateTokenisedPaymentCard Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0691a6a3-cee2-6282-bcd5-17fd1dc6a9b4.htm" title="AmendReservation Method " tocid="0691a6a3-cee2-6282-bcd5-17fd1dc6a9b4">AmendReservation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/255c6b3b-d8bb-dc1b-6484-8b751b1f5ad6.htm" title="AssignTransactionCashback Method " tocid="255c6b3b-d8bb-dc1b-6484-8b751b1f5ad6">AssignTransactionCashback Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/7921a6e1-abe7-0747-935e-9f6d678d51f5.htm" title="CalculateEVoucherSpend Method " tocid="7921a6e1-abe7-0747-935e-9f6d678d51f5">CalculateEVoucherSpend Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4cee68ee-6945-9aeb-c2b8-f2454ef2a496.htm" title="CancelReservation Method " tocid="4cee68ee-6945-9aeb-c2b8-f2454ef2a496">CancelReservation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6dd1df64-53da-cff2-e289-305fc56f8bd6.htm" title="ClaimGiftEVouchers Method " tocid="6dd1df64-53da-cff2-e289-305fc56f8bd6">ClaimGiftEVouchers Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/bd241bf0-22ed-bcf9-1fd0-8ba53f75d2f4.htm" title="ConfirmThirdPartyAdditionToLoyalty Method " tocid="bd241bf0-22ed-bcf9-1fd0-8ba53f75d2f4">ConfirmThirdPartyAdditionToLoyalty Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a8e64a42-676d-e496-73ef-79eae0c8e01e.htm" title="CreateCustomerProfile Method " tocid="a8e64a42-676d-e496-73ef-79eae0c8e01e">CreateCustomerProfile Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c7233412-6847-716c-57d4-cce47247b369.htm" title="CreateCustomerProfileGuest Method " tocid="c7233412-6847-716c-57d4-cce47247b369">CreateCustomerProfileGuest Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4d74aeda-dbe5-5696-bf70-d2e87678dfcc.htm" title="CreateCustomerProfilePartial Method " tocid="4d74aeda-dbe5-5696-bf70-d2e87678dfcc">CreateCustomerProfilePartial Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/f9f4a0f9-cbde-ca21-a7d7-a1fc863e89e0.htm" title="CreateReservationChange Method " tocid="f9f4a0f9-cbde-ca21-a7d7-a1fc863e89e0">CreateReservationChange Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/f674e432-ae26-e940-ac4e-2f3328f8e5a5.htm" title="CreateTimetableChange Method " tocid="f674e432-ae26-e940-ac4e-2f3328f8e5a5">CreateTimetableChange Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/63fa2926-afa9-d20c-433d-9927f8a7ea2b.htm" title="CustomerAccountVerification Method " tocid="63fa2926-afa9-d20c-433d-9927f8a7ea2b">CustomerAccountVerification Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/232b25cb-48e5-dd28-cb46-89144e13d09f.htm" title="CustomerChangePassword Method " tocid="232b25cb-48e5-dd28-cb46-89144e13d09f">CustomerChangePassword Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0ec24bae-81fe-9b42-e196-a2fd9658f050.htm" title="DeleteCustomerPhotocard Method " tocid="0ec24bae-81fe-9b42-e196-a2fd9658f050">DeleteCustomerPhotocard Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/31ef8bef-5105-f0cf-aebb-dd7872c1f7f2.htm" title="DeleteSmartcard Method " tocid="31ef8bef-5105-f0cf-aebb-dd7872c1f7f2">DeleteSmartcard Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/27989709-d920-1103-5ca2-8cbdb838a935.htm" title="DeleteTokenisedPaymentCard Method " tocid="27989709-d920-1103-5ca2-8cbdb838a935">DeleteTokenisedPaymentCard Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5bbf1c2d-c64b-8868-b60f-20c0812fee52.htm" title="GetBarcodeDetails Method " tocid="5bbf1c2d-c64b-8868-b60f-20c0812fee52">GetBarcodeDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/881a128f-5701-d557-4243-b28cd6f58c57.htm" title="GetBestFaresInformation Method " tocid="881a128f-5701-d557-4243-b28cd6f58c57">GetBestFaresInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c12caffb-561a-0c8b-e047-f7901890abb9.htm" title="GetCoachesInformation Method " tocid="c12caffb-561a-0c8b-e047-f7901890abb9">GetCoachesInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/3732ba35-cede-40a0-a7f3-478dc743b83d.htm" title="GetCoachesSeatAvailability Method " tocid="3732ba35-cede-40a0-a7f3-478dc743b83d">GetCoachesSeatAvailability Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/ff677e61-fe72-828b-90f5-d8e80661b9e7.htm" title="GetCompensationList Method " tocid="ff677e61-fe72-828b-90f5-d8e80661b9e7">GetCompensationList Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/ec25725f-f524-4b83-be49-c56488a2560a.htm" title="GetCtrDetails Method " tocid="ec25725f-f524-4b83-be49-c56488a2560a">GetCtrDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/57884511-f5dd-6174-794f-2f218d76f468.htm" title="GetCustomerAccountDetails Method " tocid="57884511-f5dd-6174-794f-2f218d76f468">GetCustomerAccountDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/32f221c3-a9a1-6a9d-22e2-5d8e4a2da388.htm" title="GetCustomerEVouchers Method " tocid="32f221c3-a9a1-6a9d-22e2-5d8e4a2da388">GetCustomerEVouchers Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/8fe6e163-639b-e179-6086-e205699236b8.htm" title="GetCustomerKeyValuePairs Method " tocid="8fe6e163-639b-e179-6086-e205699236b8">GetCustomerKeyValuePairs Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/ac9aa5d2-1550-9a17-62eb-3859fd2ab8ed.htm" title="GetCustomerPhotocards Method " tocid="ac9aa5d2-1550-9a17-62eb-3859fd2ab8ed">GetCustomerPhotocards Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/cd66527d-587b-f75d-dd76-2be3de34879e.htm" title="GetCustomerSegment Method " tocid="cd66527d-587b-f75d-dd76-2be3de34879e">GetCustomerSegment Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0b0d82f6-b286-6068-438d-06236c3650cb.htm" title="GetETicketUrl Method " tocid="0b0d82f6-b286-6068-438d-06236c3650cb">GetETicketUrl Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/58e3d5a5-78f3-ba25-4e81-5d72a2ddca9f.htm" title="GetFaresInformation Method " tocid="58e3d5a5-78f3-ba25-4e81-5d72a2ddca9f">GetFaresInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/90ed0488-1298-e035-4931-3afb1545f90f.htm" title="GetGoldstarSeasonTickets Method " tocid="90ed0488-1298-e035-4931-3afb1545f90f">GetGoldstarSeasonTickets Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/64473bbc-2477-7f58-cb67-83cc46234c23.htm" title="GetOptionalServices Method " tocid="64473bbc-2477-7f58-cb67-83cc46234c23">GetOptionalServices Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e04cf826-6214-19bd-9d5f-d47f80a0aa77.htm" title="GetPassengerAssistanceDetails Method " tocid="e04cf826-6214-19bd-9d5f-d47f80a0aa77">GetPassengerAssistanceDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e2d1710e-2566-e9e2-ce1e-81d1f8ba2825.htm" title="GetPresalesFulfilmentOptions Method " tocid="e2d1710e-2566-e9e2-ce1e-81d1f8ba2825">GetPresalesFulfilmentOptions Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5081c9fe-f5d9-f95e-793b-8bd4a66bb011.htm" title="GetRefundList Method " tocid="5081c9fe-f5d9-f95e-793b-8bd4a66bb011">GetRefundList Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/96ade62f-6816-2dd6-c57b-48a822bb53d9.htm" title="GetRefundList2 Method " tocid="96ade62f-6816-2dd6-c57b-48a822bb53d9">GetRefundList2 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/7cab8e64-1716-1469-0c19-e6bc7260eb28.htm" title="GetReservationAvailability Method " tocid="7cab8e64-1716-1469-0c19-e6bc7260eb28">GetReservationAvailability Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/9179f7ea-c307-1e06-1019-efee69516fa9.htm" title="GetRouteInformation Method " tocid="9179f7ea-c307-1e06-1019-efee69516fa9">GetRouteInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/516cd39f-15e5-47c1-ca94-173d44039c88.htm" title="GetSalesHistory Method " tocid="516cd39f-15e5-47c1-ca94-173d44039c88">GetSalesHistory Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e921d2e1-4bd7-53e5-f62d-c1555c7611a3.htm" title="GetSalesTransactionDetails Method " tocid="e921d2e1-4bd7-53e5-f62d-c1555c7611a3">GetSalesTransactionDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/caea0832-5573-2c62-494f-9a7ab3b90053.htm" title="GetSeasonTicketFares Method " tocid="caea0832-5573-2c62-494f-9a7ab3b90053">GetSeasonTicketFares Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/088ec29e-b246-e299-9ae6-1ef118c3471a.htm" title="GetSmartcardIpes Method " tocid="088ec29e-b246-e299-9ae6-1ef118c3471a">GetSmartcardIpes Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/340956af-aee8-38b9-904a-df8143d00f60.htm" title="GetSmartcards Method " tocid="340956af-aee8-38b9-904a-df8143d00f60">GetSmartcards Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/ea928f7c-72d2-f860-9d27-b9468540c877.htm" title="GetStoppingPatterns Method " tocid="ea928f7c-72d2-f860-9d27-b9468540c877">GetStoppingPatterns Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5eeb6726-1473-bfaf-d9d9-6f890484023c.htm" title="GetTokenisedPaymentCards Method " tocid="5eeb6726-1473-bfaf-d9d9-6f890484023c">GetTokenisedPaymentCards Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5bc3911d-dcd7-c041-a289-4a0b5e58158e.htm" title="Heartbeat Method " tocid="5bc3911d-dcd7-c041-a289-4a0b5e58158e">Heartbeat Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/721ba3ed-317a-00ba-ff32-9206e2311243.htm" title="Login Method " tocid="721ba3ed-317a-00ba-ff32-9206e2311243">Login Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/2ee37906-bfc8-ec25-1db0-bec3abfd8e8b.htm" title="MoveReservationBooking Method " tocid="2ee37906-bfc8-ec25-1db0-bec3abfd8e8b">MoveReservationBooking Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/56af5009-2b76-1e1a-dda5-a4f8b7b98b7d.htm" title="PurchaseCancellation Method " tocid="56af5009-2b76-1e1a-dda5-a4f8b7b98b7d">PurchaseCancellation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/bfc59a45-f62b-3a3b-387d-db0c5fcd01c9.htm" title="PurchaseChangeOfJourney Method " tocid="bfc59a45-f62b-3a3b-387d-db0c5fcd01c9">PurchaseChangeOfJourney Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/73f5379c-3a82-1583-9879-20aaf5edac9e.htm" title="PurchaseConfirmation Method " tocid="73f5379c-3a82-1583-9879-20aaf5edac9e">PurchaseConfirmation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/7c9ce33b-dd80-5aa4-3fa5-cc1bd41ec0c7.htm" title="PurchaseGiftEVouchers Method " tocid="7c9ce33b-dd80-5aa4-3fa5-cc1bd41ec0c7">PurchaseGiftEVouchers Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/f5514bd2-d7a5-ede9-6f30-386eeaffe630.htm" title="PurchaseReservation Method " tocid="f5514bd2-d7a5-ede9-6f30-386eeaffe630">PurchaseReservation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/01d83f5b-1134-5b3d-31d9-c7a5ee6fcef6.htm" title="PurchaseSeasonTicket Method " tocid="01d83f5b-1134-5b3d-31d9-c7a5ee6fcef6">PurchaseSeasonTicket Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/35e4dae7-4bd0-588b-16fa-cf1acd89dcd3.htm" title="PurchaseSmartcard Method " tocid="35e4dae7-4bd0-588b-16fa-cf1acd89dcd3">PurchaseSmartcard Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/7e188f66-2458-fa34-156a-fe5b4a33822c.htm" title="PurchaseTicket3 Method " tocid="7e188f66-2458-fa34-156a-fe5b4a33822c">PurchaseTicket3 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d6da0a5f-47e0-3b1f-a52c-d1c4fd6513e1.htm" title="RedeemTravelPass Method " tocid="d6da0a5f-47e0-3b1f-a52c-d1c4fd6513e1">RedeemTravelPass Method </a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/9a7cbc02-8112-4bdc-9c77-bccdbeca6005.htm" title="Refund Method " tocid="9a7cbc02-8112-4bdc-9c77-bccdbeca6005">Refund Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/bde28301-dbee-241f-f590-56abb4a12a79.htm" title="RequestItinerary Method " tocid="bde28301-dbee-241f-f590-56abb4a12a79">RequestItinerary Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/42fa9d1f-692d-563d-9a88-78d4997f9da4.htm" title="ResendBookingConfirmation Method " tocid="42fa9d1f-692d-563d-9a88-78d4997f9da4">ResendBookingConfirmation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0332a4eb-b55e-4fbc-e0c2-1de230b8f56d.htm" title="ReservationBooking Method " tocid="0332a4eb-b55e-4fbc-e0c2-1de230b8f56d">ReservationBooking Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/33e8667e-cd9f-3357-ad17-87f9ffebaeea.htm" title="ReservationBooking2 Method " tocid="33e8667e-cd9f-3357-ad17-87f9ffebaeea">ReservationBooking2 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/1eb86d7c-263a-ec44-b74a-07d866d00251.htm" title="ResetPassword Method " tocid="1eb86d7c-263a-ec44-b74a-07d866d00251">ResetPassword Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/21129e43-b090-09aa-5b3d-0acab28174b8.htm" title="SalesOfferingAuthorisation Method " tocid="21129e43-b090-09aa-5b3d-0acab28174b8">SalesOfferingAuthorisation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d012b078-3e1e-8cd1-5cff-375a34a098d1.htm" title="SalesTransactionStatusUpdate Method " tocid="d012b078-3e1e-8cd1-5cff-375a34a098d1">SalesTransactionStatusUpdate Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/b5c96bf0-d246-0901-5eff-c530bba69248.htm" title="SetCustomerKeyValuePairs Method " tocid="b5c96bf0-d246-0901-5eff-c530bba69248">SetCustomerKeyValuePairs Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/68c6c90f-034d-2800-9b49-a7cf0d88f973.htm" title="SetSubscriberDetails Method " tocid="68c6c90f-034d-2800-9b49-a7cf0d88f973">SetSubscriberDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a81faa63-ff16-3111-bacc-8e4e6a84c906.htm" title="UpdateAdrOptions Method " tocid="a81faa63-ff16-3111-bacc-8e4e6a84c906">UpdateAdrOptions Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/ba0221f0-a551-2cdf-379f-e4435d5f6fd3.htm" title="UpdateCustomerProfile Method " tocid="ba0221f0-a551-2cdf-379f-e4435d5f6fd3">UpdateCustomerProfile Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c2551d77-bbaf-4c3c-e108-e3751a0933c5.htm" title="UpdateCustomerProfileGuest Method " tocid="c2551d77-bbaf-4c3c-e108-e3751a0933c5">UpdateCustomerProfileGuest Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/1a3f95dd-f6a4-ba85-3994-d5b1447fcdb3.htm" title="UpdateLoyaltyCard Method " tocid="1a3f95dd-f6a4-ba85-3994-d5b1447fcdb3">UpdateLoyaltyCard Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/51f9967e-2559-35c2-3c34-5b2fd37a88d7.htm" title="ValidateCustomerPasswordResetToken Method " tocid="51f9967e-2559-35c2-3c34-5b2fd37a88d7">ValidateCustomerPasswordResetToken Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0cd8527e-5c04-d477-b012-44d81fd22f21.htm" title="VerifyCustomerToken Method " tocid="0cd8527e-5c04-d477-b012-44d81fd22f21">VerifyCustomerToken Method </a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>CbeWebService<span id="LSTBFAE71E4_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBFAE71E4_0?cpp=::|nu=.");</script>Refund Method </h1></td></tr></table><span class="introStyle"></span> <div class="summary"><p>Request a refund for a journey.</p><p>This case allows the customer to request, via the front end application, a refund for a journey previously booked. The request may be, for a refund for part of a journey, or a whole journey.</p><p>A refund request is generated and the sales transaction record is updated with the refund reference. A completed refund form is then generated by the FEA with details of the refund request pre-populated. The customer is required to print the form and attach tickets where collected, and post tickets and form to the refund administration centre for processing.</p><p>This FEWS also allows a customer support/refund operator to submit a refund where a paper refund application has been received which may or may not be is not on the designated refund form. (See assumption 1).</p><p>This FEWS has been updated for the ticket office and to allow delay repay season ticket refunds to be requested. In addition to season ticket refunds this FEWS has been extended to include refund of plusbus tickets associated with rail ticket refunds.</p><p>The FEWS also includes the ability to request a car parking refund.</p></div><p> </p>
    <strong>Namespace:</strong> 
   <a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService</a><br />
    <strong>Assembly:</strong>
   Vix.Cbe.WebService (in Vix.Cbe.WebService.dll) Version: 0.1.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EACA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">[<span class="identifier">PerformanceCounterAttribute</span>(<span class="keyword">true</span>, <span class="keyword">typeof</span>(<span class="identifier">ServiceMethodPerformanceCounter</span>), "CBE-Operation.V7", 
	"Web-Refund", Target = <span class="identifier">CbeActivity</span>.Refund)]
<span class="keyword">public</span> <span class="identifier">Task</span>&lt;<span class="identifier">RefundMessageResponseV1</span>&gt; <span class="identifier">Refund</span>(
	<span class="identifier">RefundMessageRequestSpdAuthV1</span> <span class="parameter">request</span>
)</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">request</span></dt><dd>Type: <a href="c80399e6-1d94-0d58-afbc-22b839bb652c.htm">Vix.Cbe.WebService.Contracts.SalesTransaction<span id="LSTBFAE71E4_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBFAE71E4_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>RefundMessageRequestSpdAuthV1</a><br />The refund request.</dd></dl><h4 class="subHeading">Return Value</h4>Type: <a href="https://docs.microsoft.com/dotnet/api/system.threading.tasks.task-1" target="_blank" rel="noopener noreferrer">Task</a><span id="LSTBFAE71E4_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBFAE71E4_2?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script><a href="f469a928-2f49-0d4f-861b-2f7d33ddfefd.htm">RefundMessageResponseV1</a><span id="LSTBFAE71E4_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBFAE71E4_3?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script><br />Refund response wrapped in a response message contract.<h4 class="subHeading">Implements</h4><a href="f60bc60b-4b79-3946-687e-dbffa06b72df.htm">ICbeWebService<span id="LSTBFAE71E4_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTBFAE71E4_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Refund(RefundMessageRequestSpdAuthV1)</a><br /></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Remarks</span></div><div id="ID3RBSection" class="collapsibleSection"><p><b>BACKGROUND</b></p><p>
			This FEWS allows the customer to request, via the front end application, a refund for a journey previously booked. The request may be for a refund for part of a journey, or a whole journey. The request for a refund may be for one or more passenger.
		</p><p>
			A refund request is generated and the sales transaction record is updated with the refund reference. A completed refund form is then generated by the FEA with details of the refund request pre-populated. The customer is required to print the form and attach tickets from where collected, and post tickets and form to the refund administration centre for processing.
		</p><p>
			This case also allows a customer support/refund operator to submit a refund where a paper refund application has been received which may or may not be on the designated refund form.
		</p><p>
			This version of the FIGS now supports requests for refunds of etickets (mobile mtickets).
		</p><p><b>BUSINESS PROCESS CONTEXT</b></p><p>
			The diagram below shows the context of where in the Refunds (Customer Request) process this FEWS call occurs.
		</p><img src="\Content\FEWS 9.0 Refund Request\Context.jpg" /><p><b>PROCESS DIAGRAM</b></p><img src="\Content\FEWS 9.0 Refund Request\ProcessDiagram.jpg" /><p><b>PROCESS DESCRIPTION</b></p><p>
			Refund applications are done by customers on the web, accessing their account and viewing their sales history. If the customer has no web access then the relevant refund form (from a station) can be submitted by post (with any tickets), for the customer support centre to create the refund using this FEWS. Alternatively paper requests not on the required form may also result in a refund request by an operator, being created by this FEWS. For the purpose of this FEWS the retail channel is shown as web and telesales and ticket office It is assumed that manual refund applications will be entered by operators at the telesales centre as part of the customer support function.
		</p><p>
			This FEWS inputs all the data required associated with sold ticket in a sales transaction to create a refund application against the original sales transaction in the CBE database. The refund record created is associated to the related ticket item in the sales transaction record, which is updated with the refund reference. The FEA must support the creation of the completed refund form for printing which is then available for the customer to use. The customer is required to print the form and attach tickets where they have been collected and post tickets and form to the refund administration centre for processing. The ticket number field is therefore optional in this call and may not be provided at the time of the refund application but must be provided later before the refund process can be completed.
		</p><p>
			The refund may be for one or more item in the sales transaction, but cannot be for different items in different sales transactions. In this case a separate refund application is required. The refund may be for a range of cases including:
			<ul><li>A part refund for an unused return leg.</li><li>A part used season ticket.</li><li>An unused ticket.</li><li>One or more unused ticket in a party of several passengers.</li></ul></p><p>
			The refund record includes free text which describes the customer’s refund request, which should be sufficient to allow the refund operator to progress to the next stage of refund processing. Refunds applications which have not been sold by the CBE are currently not supported (Foreign Refunds), but are expected to be included in the near future. Currently a refund for a ticket not sold by the CBE will be rejected.
		</p><p>
			Where a season ticket refund is requested the season refund from date must be provided otherwise it will be assumed to be the date the record was created by the CBE.
		</p><p>
			The request must include a Refund Category Type indicator which is later used to identify the type of product and the type of refund required, the values are:
			<ul><li>P2PDelayRepay</li><li>P2POther</li><li>SeasonDelayRepay</li><li>SeasonOther</li><li>Plusbus</li><li>RangerRoverFull</li><li>ChangoverSeason (where previously changed over season tkt now refund requested)</li><li>CarParking</li></ul></p><p>
			Refund of tickets fulfilled as Etickets for mobile mtickets, which were previously excluded from refunds, can now be refunded and are supported by this FEWS refund request.
		</p><p>
			On submission of a valid refund request the CBE returns a refund reference number to the FEA or an error message where applicable.
		</p><p>
			The FIGS also includes the ability to request a car parking refund, however for these ticket types only they are refunded manually after the refund request has been received.
		</p><p>
			Transactions which include tickets bought with associated plusbus products cannot be part refunded, leaving only the plusbus products. If plusbus products are included in the transaction then these must be refunded as well as the rail product. Plusbus products can be refunded without their associated rail product but not vice versa.
		</p><p>
			Refunds for season tickets which have previously been changed are supported by this FEWS; the operator will select the refund category type ‘Changed season ticket refund’. This is validated by the CBE to conform that it has previously been a changeover season ticket. If a refund is requested for a season ticket previously changed over with an incorrect refund category type, the CBE will reject this application.
		</p><p>
			Where a Travelcard has been purchased as an add on to a separate travel ticket into London then this may be requested for refund either with the other ticket or on its own. In the case of tickets to be fulfilled by TOD but sold by CBE, if the customer has not collected the ticket then the ticket number (used in the BP record for TOD placement) which is included in FEWS 4.3.1 should be used. In the case of a TOD ticket which has been issued already the ticket numbers on the printed ticket will not match and the CBE will revert to the ticket number used in the SDCI BP record at time of placement as per FEWS 4.3.1 when creating the refund record.
		</p><p>
			Added processing to handle waiving of delta fare in CoJ. If any refunding ticket's payment was by applying CojDeltaFare Evoucher, refund record will have IsDeltaFareWaived flag set in DB to true. Then, refund process will be able to refund 0 value to customer.
		</p><p><b>ASSUMPTIONS</b><ol><li>It is assumed the management of the request and subsequent formatting and printing of the Refund Request Form is the responsibility of the FEA.</li><li>It is assumed that the customer, on completion of the refund form generated by the FEA, will identify the number of tickets to be refunded where the sale is for multiple passengers. This will then be processed as per business process.</li><li>It is assumed that the setting of the Refund Category Type indicator will be done by the FEA by means of the Customer/ UI dialogue which will identify the type of ticket and type of refund required and then set the correct value.</li><li>It is assumed that for delay repay of P2P or season tickets all the required details are held in the reason for refund in order for the operator to then process the refund. If this is not the case the refund will not progress or will be processed and rejected.</li><li>No more than one STDR refund application is permitted for the same STDR date. (This means for an outbound and inbound delay on same day the customer must request STDR to be both legs).</li><li>It is assumed that if a customer wishes to apply for season ticket delay repay refunds for more than one day where there has been disruption each day is done as a separate request.  E.g if a customer saves up the list of days when there was a delay during the PoV of their season ticket – each day’s refund has to be requested separately.</li><li>It is assumed that the FEA will prompt the customer (season ticket holder) that multiple refunds for delay repay are limited to one outbound, one inbound journey or both for any one day of disruption.</li><li>It is assumed that the TOC staff are aware of the Retail Manual rules regarding allowing refunds of duplicate season tickets.</li><li>It is assumed that in the case of a refund request for a season ticket which has previously been changed (a changeover season ticket requiring a refund), the operator will have recognised this from their sales history (within the CBE) and will select the correct refund category type.</li><li>At the current time it is assumed that the CBE can only support refunds of previously changed season tickets where the CBE has sold these. This may change in the future subject to agreed CRs.</li><li>It is assumed that in the case of a car parking refund request associated with CR16 that the FEA will calculate the refund and enter this manually in subsequent FEWS 9.2.</li><li>It is assumed that the ticket number (where present), will be found by using the data in FEWS 4.3.1 V20 onwards, which includes ticket number for each item in a transaction, except where the fulfilment method is TOD when the CBE Item Number will be present instead.   The FEA is required to use this data to prepopulate the input of the transaction number, ticket number or CBE Item number (where present)  for the input for this FEWS.</li><li>It is assumed that the FEA will prepopulate the TOD fulfilment details and CTR reference for TOD in the input from the data from FEWS 4.3.1, to be used by the CBE when validating the ticket number details.</li><li>It is assumed that business process for refund of a TOD ticket for one but not all journeys in a CTR is done by getting the customer to collect all tickets and then request refund of the one required using the physical issued ticket. The CBE will only do virtual issue of the whole CTR, not partial issue.  </li><li>It is assumed that for groupsave and DUO type tickets full refunds for all passengers are allowed and that partial refunds for less passengers than the whole group are not currently permitted.</li><li>Where journeys (P2P or groupsave) are not able to be completed due to train cancellation a refund may be requested and where this was on the outbound leg for a return journey or for a single ticket the whole ticket fare will be refunded. Where the incomplete journey was on the inbound return leg, only a refund of the return leg is given, (based on the difference between the total ticket fare and the single fare for the return leg, see FEWS 9.1.1 for more details). It is assumed that the refund operator will have the tools to verify that the journey (RSID) on the date supplied was disrupted.</li></ol></p><p><b>VALIDATION</b></p><p>
			Parameter Validation:
			<ol><li>All mandatory fields present.</li></ol></p><p>
			Business Validation:
			<p>The following BV rules apply to CBE sold tickets only:</p><ol><li>The sales transaction must be present and must have status of confirmed.</li><li>All ticket numbers must belong sales transaction (FEWS 4.3.1).</li><li>The ticket start date is &gt; the refund request date in the case of rovers and rangers tickets by checking the rover id code exists in the rovers and rangers reference data set.</li><li>Transaction number exists.</li><li>The ticket validity end date is not more than 28 days (CBE configurable) older than the request date (current system date).</li><li>
					Where TODFulfilment Detail is present:
					<ol><li>CTR reference must be present.</li><li>At least one CBE Item Number must be present, or ticket number where collected at CBE TVM (as per FEWS 4.3.1).</li><li>Passenger Fare Id must belong to sales transaction (FEWS 4.3.1).</li></ol></li><li>
					Where CTR reference is present get the CTR from the LSM/cache if available (using FEWS 7.1 call).  Check the booking/print status:
					<ol><li>If all CTR journeys elements are 4/3 then set TODCollectionFlag in output to TRUE.</li><li>If all CTR journey elements are NOT 4/3 then set TODCollectionFlag in output to FALSE to signify not collected.</li><li>If all CTR journey elements are different then reject this application.</li></ol></li><li>Where TODFulfilment Detail is missing ticket number(s) are mandatory and should exist within the Sales Transaction.</li><li>Check that at least one Refund Ticket Request Detail is present, with either ticket number(s) or Passenger Fare Id(s) present.</li><li>Check the number of tickets or the number of passenger fare ids  for refund are not greater than those in the sales transaction.</li><li>
					If the Refund category type  indicator has value  Season ticket refund delay repay then:
					<ol><li>The season ticket delay repay structure must be present and the both the datetime field and direction field (outbound/inbound/both) must be present.</li><li>Passenger fare id must be absent (as TOD ticket must have been collected) and ticket number provided.</li><li>Datetime field in STDR detail must be within the period of validity range of ticket - valid date = {Start date, start date+1, ... End date -1, End date}.</li></ol></li><li>No more than one STDR refund application is permitted for the same STDR date.</li><li>If the refund category type is – Changed season ticket – check that the transaction record is for a changeover season ticket.</li><li>If the transaction id is for a changed over season ticket then check that the refund category type is – Changed season ticket.</li><li>Check if original transaction MOP was warrant,  If Warrant number or 09700 and 09800 then reject  this refund ( MoD warrants are not subject of automated refund).</li><li>Check that the sales transaction record does not have an associated duplicate sales transaction record.</li><li>If refund category type is not STDR then check if ticket has been refunded already.</li><li>If the transaction includes one or more plusbus products and the ticket number(s) supplied do not include the associated plusbus (from the same NLC as the ticket being refunded) then reject the refund. (See notes).</li><li>If the refund category type is Groupsave/DUO Full refund, or  Groupsave/DUO incomplete journey refund, then the number of occurrences of ticket number or passenger fare id (where TOD), must correspond to the total number of passengers for the groupsave ticket (journey) in the sale transaction, else reject the refund.</li><li>If the refund category type is either Groupsave/DUO incomplete journey refund, or Incomplete Journey P2P then incomplete journey details must be present.</li><li>Where NLC/CRS locations are provided these should exist.</li><li>Where incomplete journey details are present the datetime of incomplete journey must be valid within the start date and period of validity of the ticket purchased.</li><li>If OutboundLegFlag is TRUE check that the start location matches the origin location for journey in the original sales transaction. </li><li>If OutboundLegFlag is FALSE check that the start location matches the destination location for the original sales transaction.</li><li>Where the refund category is Groupsave/DUO full refund or Groupsave/DUO Incomplete journey, check with the original sales transaction that the ticket is a group ticket.</li><li>Any half-saver single ticket in the transaction can be refunded in isolation.</li><li>Any single non-half-saver ticket in the transaction that is not for a journey matched in the opposite direction by a half saver journey, can be refunded in isolation.</li><li>Any single non-half-saver ticket in the transaction that is for a journey matched in the opposite direction by a half saver journey can be refunded in isolation, provided that this will leave at least the same number of unrefunded non-half-saver tickets as unrefunded half saver tickets.</li><li>
					If there are the same number of unrefunded non-half-saver single tickets corresponding to the number of unrefunded half-saver tickets, then the refund of any of these non-half-saver tickets is only valid provided that either:
					<ul><li>the IsChangeOfJourney flag is set to true or</li><li>the non-half-saver tickets and corresponding half-saver tickets are refunded in pairs.</li></ul></li><li>If refund for full transaction is requested and all basket items have already been fully compensated or refunded, then reject the request. If refund request is for specific tickets within transaction and all tickets have been fully compensated or refunded, then reject the request.</li><li>If AllowRefundOriginalTransactionCOJ (ConfigUI) is set to false then Refund request for COJ original transaction is not allowed.</li><li>If AllowRefundOriginalTransactionCOJ (ConfigUI) is set to true then Refund request for original transaction in COJ is allowed. COJ Ticket must be requested for refund.</li><li>Ticket cannot be flexi-pass.</li><li>If ticket is flexi-season ticket then date of the refund request must be before ticket expires and RefundCategory must be set to "SeasonOther".</li></ol></p><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Examples</span></div><div id="ID2RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EABABBA_tab1" class="codeSnippetContainerTabSingle">Example Refund Request</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EABABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EABABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EABABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:soapenv</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span> <span class="highlight-xml-attribute-name">xmlns:ns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:UserCredentials</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:UserName</span><span class="highlight-xml-bracket">&gt;</span>TSawyer<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:UserName</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Password</span><span class="highlight-xml-bracket">&gt;</span>password<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Password</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:UserCredentials</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundRequest</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>17SZ8HB6EE<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CtrReference</span><span class="highlight-xml-bracket">&gt;</span>L6F747WL<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CtrReference</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:IsChangeOfJourney</span><span class="highlight-xml-bracket">&gt;</span>true<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:IsChangeOfJourney</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Tickets</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Zero or more repetitions:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundTicket</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TicketNumber</span><span class="highlight-xml-bracket">&gt;</span>1161<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:TicketNumber</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:IncompleteJourneyDetails</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:DateTime</span><span class="highlight-xml-bracket">&gt;</span>2017-01-01<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:DateTime</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:StartLocation</span><span class="highlight-xml-bracket">&gt;</span>
              <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
              <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Crs</span><span class="highlight-xml-bracket">&gt;</span>MAN<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Crs</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:StartLocation</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:EndLocation</span><span class="highlight-xml-bracket">&gt;</span>
              <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Nlc</span><span class="highlight-xml-bracket">&gt;</span>1072<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Nlc</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:EndLocation</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:OutboundLegFlag</span><span class="highlight-xml-bracket">&gt;</span>false<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:OutboundLegFlag</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:IncompleteJourneyDetails</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundCategory</span><span class="highlight-xml-bracket">&gt;</span>P2POther<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundCategory</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundReason</span><span class="highlight-xml-bracket">&gt;</span>Delay<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundReason</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundTicket</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundTicket</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TicketNumber</span><span class="highlight-xml-bracket">&gt;</span>56<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:TicketNumber</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundCategory</span><span class="highlight-xml-bracket">&gt;</span>P2POther<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundCategory</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundReason</span><span class="highlight-xml-bracket">&gt;</span>single without half saver pair<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundReason</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundTicket</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Tickets</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundReason</span><span class="highlight-xml-bracket">&gt;</span>Delay and change of journey.<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundReason</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:AdditionalDetailList</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Zero or more repetitions:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:AdditionalDetail</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Name</span><span class="highlight-xml-bracket">&gt;</span>delay<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Name</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Value</span><span class="highlight-xml-bracket">&gt;</span>60 minutes<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Value</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:AdditionalDetail</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:AdditionalDetailList</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundSubStatus</span><span class="highlight-xml-bracket">&gt;</span>requested<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundSubStatus</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:SubChannel</span><span class="highlight-xml-bracket">&gt;</span>Company<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:SubChannel</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundRequest</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EABABBA");</script><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAABBA_tab1" class="codeSnippetContainerTabSingle">Example Refund Response</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EAAABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:s</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">PerformanceInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>303<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>0<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">PerformanceInformation</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">FewsInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>9.0<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Revision</span><span class="highlight-xml-bracket">&gt;</span>1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">Revision</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>27.4<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">FewsInformation</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">RefundResponse</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">RefundNumber</span><span class="highlight-xml-bracket">&gt;</span>17RZ8HECIE<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">RefundNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>17SZ8HB6EE<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">RefundResponse</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABBA");</script></div></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Revision History</span></div><div id="ID4RBSection" class="collapsibleSection"><table><tr><th>Date</th><th>Version</th><th>Description</th></tr><tr><td>29/01/2019</td><td>27.0</td><td>FEWS 9.0 Refund Request</td></tr><tr><td>09/03/2020</td><td>27.1</td><td>Added validation to prevent refunding already compensated tickets via ADR.</td></tr><tr><td>15/02/2021</td><td>27.2</td><td>Added validation to allow Refund Requests for original transaction in COJ.</td></tr><tr><td>11/05/2021</td><td>27.3</td><td>Added processing to handle waiving of delta fare in CoJ.</td></tr><tr><td>17/05/2021</td><td>27.4</td><td>Added validations for flexi-season tickets.</td></tr></table></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID5RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="dbe63916-3728-a5c7-9333-dd7d99c307bd.htm">CbeWebService Class</a></div><div class="seeAlsoStyle"><a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>