<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ICbeOnboardService.PurchaseSeasonTicket Method </title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="PurchaseSeasonTicket method" /><meta name="System.Keywords" content="ICbeOnboardService.PurchaseSeasonTicket method" /><meta name="Microsoft.Help.F1" content="Vix.Cbe.WebService.ICbeOnboardService.PurchaseSeasonTicket" /><meta name="Microsoft.Help.Id" content="M:Vix.Cbe.WebService.ICbeOnboardService.PurchaseSeasonTicket(Vix.Cbe.WebService.Contracts.SalesTransaction.PurchaseSeasonTicketMessageRequestAuthV1)" /><meta name="Description" content="This FEWS takes the data from FEWS 5.0 and validates the sale prior to payment authorisation and puts the sale into a pending state awaiting FEWS 6.2 payment confirmation. A season ticket request is made for one passenger only." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Vix.Cbe.WebService" /><meta name="file" content="b9213dc8-4425-2896-92c6-7fe63f5379ef" /><meta name="guid" content="b9213dc8-4425-2896-92c6-7fe63f5379ef" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.5.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Central Booking Engine Class Library<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine Class Library" tocid="roottoc">Central Booking Engine Class Library</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine" tocid="e7529a28-e260-e3d8-0718-b3fc28f03686">Central Booking Engine</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/26210088-6c4f-d952-a0af-51ddaeac4a15.htm" title="Vix.Cbe.WebService" tocid="26210088-6c4f-d952-a0af-51ddaeac4a15">Vix.Cbe.WebService</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/d1d9ea92-601d-9061-c982-a2d7695eafe6.htm" title="ICbeOnboardService Interface" tocid="d1d9ea92-601d-9061-c982-a2d7695eafe6">ICbeOnboardService Interface</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/b2b7054b-a878-8217-a676-540b2bdf544c.htm" title="ICbeOnboardService Methods" tocid="b2b7054b-a878-8217-a676-540b2bdf544c">ICbeOnboardService Methods</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/34ef9894-2d8a-2229-5b08-7e3faa537905.htm" title="ChangeOperatorPassword Method " tocid="34ef9894-2d8a-2229-5b08-7e3faa537905">ChangeOperatorPassword Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/151b3dc5-717d-0e96-5ec5-e528a8c71104.htm" title="CreateCustomerProfile Method " tocid="151b3dc5-717d-0e96-5ec5-e528a8c71104">CreateCustomerProfile Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6939f62b-f67b-5e99-7d16-f9a04818a79a.htm" title="CustomerCardLogin Method " tocid="6939f62b-f67b-5e99-7d16-f9a04818a79a">CustomerCardLogin Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/b18f8064-052e-dc89-55de-88671be1a8d3.htm" title="DoNonissue Method " tocid="b18f8064-052e-dc89-55de-88671be1a8d3">DoNonissue Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/99e4f74f-bc82-a440-a828-a68686fbe6a8.htm" title="GetCustomerAccountDetails Method " tocid="99e4f74f-bc82-a440-a828-a68686fbe6a8">GetCustomerAccountDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a9648d99-d390-2b66-b470-2293617afd3a.htm" title="GetFaresInformation Method " tocid="a9648d99-d390-2b66-b470-2293617afd3a">GetFaresInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/1c4c3f87-040c-b071-3001-d0c0f6f2abcf.htm" title="GetOptionalServices Method " tocid="1c4c3f87-040c-b071-3001-d0c0f6f2abcf">GetOptionalServices Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6e32247f-3cdb-df7d-a99f-b6ef9174d2fe.htm" title="GetPresalesFulfilmentOptions Method " tocid="6e32247f-3cdb-df7d-a99f-b6ef9174d2fe">GetPresalesFulfilmentOptions Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/7c85d1f7-57cf-0658-9796-bc086d5387a7.htm" title="GetRouteInformation Method " tocid="7c85d1f7-57cf-0658-9796-bc086d5387a7">GetRouteInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/466a92c6-529d-39a6-719b-46583fea4faf.htm" title="GetSalesBySalesPoint Method " tocid="466a92c6-529d-39a6-719b-46583fea4faf">GetSalesBySalesPoint Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/880fd477-df8d-f38a-97e6-c816c42ccb96.htm" title="GetSeasonTicketFares Method " tocid="880fd477-df8d-f38a-97e6-c816c42ccb96">GetSeasonTicketFares Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/8b076afe-bf46-b90e-c421-404b1f04f8d9.htm" title="GetStoppingPatterns Method " tocid="8b076afe-bf46-b90e-c421-404b1f04f8d9">GetStoppingPatterns Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/338d7460-5d3b-e947-d635-4b5a5e2d8db8.htm" title="Heartbeat Method " tocid="338d7460-5d3b-e947-d635-4b5a5e2d8db8">Heartbeat Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a127de8a-e98f-08a6-dbc4-132ee44ea0a6.htm" title="OperatorLogin Method " tocid="a127de8a-e98f-08a6-dbc4-132ee44ea0a6">OperatorLogin Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/ad7355e6-4772-7f8b-8fb6-fd27af262d5f.htm" title="OperatorLogout Method " tocid="ad7355e6-4772-7f8b-8fb6-fd27af262d5f">OperatorLogout Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6d62420c-15d4-419d-38b6-11799239acb7.htm" title="OverprintConfirmation Method " tocid="6d62420c-15d4-419d-38b6-11799239acb7">OverprintConfirmation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4358fc8a-7429-c887-767d-4b8ea1894f09.htm" title="PurchaseConfirmation Method " tocid="4358fc8a-7429-c887-767d-4b8ea1894f09">PurchaseConfirmation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/64fa24bb-47c0-f929-a194-7f6f5a7442f4.htm" title="PurchaseExcessFareOnboard Method " tocid="64fa24bb-47c0-f929-a194-7f6f5a7442f4">PurchaseExcessFareOnboard Method </a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/b9213dc8-4425-2896-92c6-7fe63f5379ef.htm" title="PurchaseSeasonTicket Method " tocid="b9213dc8-4425-2896-92c6-7fe63f5379ef">PurchaseSeasonTicket Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/611ef28b-1d20-48d7-8200-2a57206bc042.htm" title="PurchaseTicket3 Method " tocid="611ef28b-1d20-48d7-8200-2a57206bc042">PurchaseTicket3 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/1f5550f4-5492-0e95-4030-a58caf3af5d1.htm" title="RedeemTravelPass Method " tocid="1f5550f4-5492-0e95-4030-a58caf3af5d1">RedeemTravelPass Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/607de28c-a81b-10bb-2def-56d4247c086a.htm" title="RequestItinerary Method " tocid="607de28c-a81b-10bb-2def-56d4247c086a">RequestItinerary Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c7c70de8-c36a-193c-652c-00bfb291e5ab.htm" title="SearchCustomerProfile Method " tocid="c7c70de8-c36a-193c-652c-00bfb291e5ab">SearchCustomerProfile Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5550d252-ec8c-3833-5390-b72e4b7e1320.htm" title="UpdateCustomerProfile Method " tocid="5550d252-ec8c-3833-5390-b72e4b7e1320">UpdateCustomerProfile Method </a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>ICbeOnboardService<span id="LSTE76812E7_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE76812E7_0?cpp=::|nu=.");</script>PurchaseSeasonTicket Method </h1></td></tr></table><span class="introStyle"></span> <div class="summary"><p>This FEWS takes the data from FEWS 5.0 <a href="880fd477-df8d-f38a-97e6-c816c42ccb96.htm">GetSeasonTicketFares(SeasonTicketFaresMessageRequestAuthV1)</a> and validates the sale prior to payment authorisation and puts the sale into a pending state awaiting FEWS 6.2 payment confirmation. A season ticket request is made for one passenger only.</p><p>This version supports the phase 3 functionality for the purchase of a season ticket renewal with fulfilment by CCST or smart, both of which are solely Ticket Office functions.</p></div><p> </p>
    <strong>Namespace:</strong> 
   <a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService</a><br />
    <strong>Assembly:</strong>
   Vix.Cbe.WebService (in Vix.Cbe.WebService.dll) Version: 0.1.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EACA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">[<span class="identifier">OperationContractAttribute</span>]
[<span class="identifier">FaultContractAttribute</span>(<span class="keyword">typeof</span>(<span class="identifier">CbeFault</span>))]
[<span class="identifier">CbeValidationCallHandlerAttribute</span>(RetailChannel = <span class="identifier">CbeRetailChannel</span>.OnBoard, Order = 50)]
[<span class="identifier">FewsAttribute</span>("5.1", <span class="identifier">FewsRevisionNumber</span>.First, "24.10")]
<span class="identifier">Task</span>&lt;<span class="identifier">PurchaseSeasonTicketMessageResponseV1</span>&gt; <span class="identifier">PurchaseSeasonTicket</span>(
	<span class="identifier">PurchaseSeasonTicketMessageRequestAuthV1</span> <span class="parameter">request</span>
)</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">request</span></dt><dd>Type: <a href="f6736440-cde7-4602-317b-a49c572682e0.htm">Vix.Cbe.WebService.Contracts.SalesTransaction<span id="LSTE76812E7_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE76812E7_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>PurchaseSeasonTicketMessageRequestAuthV1</a><br />Request containing details of the journey, ticket, PlusBus, parking, eVoucher &amp; fulfilment information.</dd></dl><h4 class="subHeading">Return Value</h4>Type: <a href="https://docs.microsoft.com/dotnet/api/system.threading.tasks.task-1" target="_blank" rel="noopener noreferrer">Task</a><span id="LSTE76812E7_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE76812E7_2?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script><a href="b29a9bb8-ff45-747f-fe31-c90379fcf97a.htm">PurchaseSeasonTicketMessageResponseV1</a><span id="LSTE76812E7_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTE76812E7_3?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script><br />Transaction number wrapped in a response message contract.</div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Remarks</span></div><div id="ID3RBSection" class="collapsibleSection"><p><b>BACKGROUND</b></p><p>
      This FEWS provides all the data required to confirm a season ticket purchase including the fulfilment method. It takes the data from FEWS 5.0 (season ticket fare details), and validates the sale prior to payment authorisation and puts the sale into a pending state awaiting FEWS 6.2 payment confirmation. The season ticket details include the Period of Validity – the number of months and days the season ticket is valid for.
    </p><p>
      The FEWS only permits a single season ticket request for one passenger. It may however include additional items such as plusbus where available, for the chosen period of validity. The season ticket request may include travel to/from a London underground zone as shown by the UTS zone data, but unlike point to point tickets, Travelcards are not permitted to be purchased with season tickets.
    </p><p>
      At the current time season tickets can only be sold via the internet and call centre for periods of:
      <ul><li>7 days (on smart enabled routes only) and smart fulfilled</li><li>1 or more months and part months up to 12 months.</li></ul></p><p>
      At a ticket office the sale of season tickets are not restricted. The TVM is expected to reflect the ticket office in the sale of season tickets though this has to be confirmed. The on board retail channel will retail 7 day season tickets only.
    </p><p>
      Season tickets of less than one month, but greater than 7 days are not available to retail.
    </p><p>
      Season ticket holders are required to have a valid Photocard in association with the season ticket for season tickets of 1 month or more. This is not validated by the CBE but by the on-train ticket inspector.
    </p><p><b>BUSINESS PROCESS CONTEXT</b></p><p>
      The diagram below shows the context of where in the Purchase Ticket (Seasons) process this FEWS call occurs.
    </p><img src="\Content\FEWS 5.1 Purchase Season Ticket\Context.jpg" /><p><b>PROCESS DIAGRAM</b></p><p>
      The diagram below shows the process steps that the CBE undertakes in response to a Purchase Season Ticket request.
    </p><img src="\Content\FEWS 5.1 Purchase Season Ticket\ProcessDiagram.jpg" /><p><b>PROCESS DESCRIPTION</b></p><p>
      This FEWS provides all the data to the CBE to create a sales transaction record in a pending state. Once payment is confirmed in FEWS 6.2 the record is marked as completed. On receipt of FEWS 5.1input data the CBE rechecks all the fares data and prices input with IPTIS, prior to writing the sales record.
    </p><p>
      At the time of writing no railcards are permitted with season tickets, however this may change and has not always been the case. IPTIS will determine if a railcard is applicable if this data is provided.
    </p><p>
      This version supports the phase 3 functionality for the purchase of a season ticket and renewal with fulfilment by CCST or smart. Where a season ticket is to be fulfilled as CCST by post from the CC (ticket bureau), the delivery address flag in the input is set to the default value 0 and represents the customer’s registered address in their account details. Where the flag is &gt; 0 it represents the appropriate alternative delivery address. This version also includes support for selling season tickets with travelcard element included in the ticket, and also plusbus, where the PoV of the plusbus ticket matches the season ticket PoV. The period of validity format is format: NNMNND. A season ticket with 1 month+12 days = 01M12D.
    </p><p>
      The CBE will determine the request to be either a season ticket sale or renewal from the renewal flag set to TRUE for renewal and FALSE for a new ticket purchase.
    </p><p>
      For season ticket renewals it has been agreed with Stagecoach that no provision is made for void or lost days or Passenger Charter discount. In line with latest practice amongst TOCs the CBE will instead support delay repay to allow customers to request compensation against lost or disrupted journeys, as applicable to their ticket. The renewal will be identified in the CBE by checking the previous ticket dates so that the correct renewal data can be written to a CCST ticket. (If delay repay compensation is required for certain days of disruption this would be done via another FEWS and is outside the scope of this FIGS). Where a renewal has been purchased the CCST season ticket has renewal printed on it.
    </p><p>
      The number of days for selling season tickets/renewals (not 7 day season tickets), in advance of the start date is configurable within the CBE according to the latest RSP rules and SC’s preferences. 7 day season tickets are not renewable or changeable (regardless of fulfilment type and retail channel).
    </p><p>
      For 7 day season tickets the CBE enforces the business rule for the advance sale of CCST (not smart)  7 day season tickets at ticket office or TVM so that they cannot be sold more than 1 business day (after 12noon),  before the start date of the ticket. This is the only type of season ticket permitted to be sold at TVM at the current time.  A similar rule is expected to apply to the sale of 7 day season tickets on board (awaiting SC confirmation).
    </p><p>
      Fare Signature is a string that is returned within IPTIS Journey Planning response for each fare option. The fare signature contains the following information:
      <ul><li>Ticket FTOT</li><li>Fare Setter</li><li>Route Code</li><li>Restriction Code</li><li>Fare Origin</li><li>Fare Destination</li></ul>
      e.g. ‘SOS|IWC|00000|2C|0438|1072’
    </p><p><b>ASSUMPTIONS</b></p><p><ol><li>The choice of delivery address for postal fulfilment (CCST) will be supplied by the front end client using the delivery address flag, based on customer account address details.</li><li>Travelcard fares will only be offered as inclusive fares and not as a separate Travelcard season ticket.</li><li>As the CBE does not support renewals involving PCD it is assumed that the delay replay element is down to the customer to claim and is independent of the CBE season ticket renewal process. (Delay repay is covered under refund functionality FEWS 9.n set).</li><li>The FEA of the TVM should not offer 7-day season ticket purchases by CCST other than for next business day and not before 1200. It is envisaged that this FEWS will support sales of season tickets via TVM which are &gt; 7 days but not annuals</li><li>As per CR93 it is assumed that RSP will permit 7 day season tickets onto CCST paper roll type.</li></ol></p><p><b>VALIDATION</b></p><p>
      The following validation checks are made by the CBE on the data provided by the FEA. Where the request message from the FEA fails one or more of the validation checks listed below, the CBE will respond with an appropriate error messages as shown in the appropriate API guide.
    </p><p><ol><li>All mandatory items present</li><li>NLC and CRS codes</li><li>Cashback charity Id length should not exceed 36 characters</li><li>Smartcard number: (Using check digit validation (See ITSO TS 1000-2:2010-02 on ITSO website.)</li><li>Customer Reference No. must exist</li><li>Operator credentials must be valid  (if Call Centre/Ticket office/onboard  retail channel) must exist else check sales point details for other retail channels</li><li>NLC &amp; CRS validation as previous input FEWS (i.e. Journey Planning), NLC must be used for ticket origin and destination location</li><li>
          POV is as follows:
          <ul><li>
              POV = 7 day <b>OR</b></li><li>POV &gt;= 1 Month and &lt;= 1 year (12M00D) – not allowed where RC is Onboard</li></ul></li><li>The fulfilment option chosen must be consistent with the rules in the season ticket</li><li>
          For onboard TIS the fulfilment should be:
          <ul><li>
              TOD for PoV &gt; 7 days <b>OR</b></li><li>For Season tickets if PoV = 7 days then CCST (on Paper roll) or TOD</li></ul></li><li>If fulfilment method flags is CCST print, then delivery address number must be present</li><li>If delivery address identifier present there must be a corresponding address in customer account details. (see notes)</li><li>If Fulfilment method flag is smart and smartcard number present, then confirm smartcard number exists in customer account</li><li>If Fulfilment method flag is smart validate collection location is smart enabled and has at least one Set ID available</li><li>If Season Ticket is 7 day, and RC = web mobile or CC then Fulfilment Option must be Smart fulfilment, if RC  = TO or TVM then fulfilment option must be CCST (Direct) or smart</li><li>Where UTS Zones are requested the Origin or Destination location (NLC or CRS) must be in one of the UTS Zones</li><li>Where UTS Zones are requested the Zones requested must be contiguous. i.e. Zone 123400 is acceptable whereas Zone 120400 is not</li><li>The Season Ticket Fare is correct – do not validate this for OnBoard TIS, (check the structure requested in FEWS 5.1 for RC=OnBoard, BUT with one exception – data fields fare and ticket detail UTS zone are not checked with IPTIS</li><li>Total Rail Product Value = Season Ticket + PlusBus + Fulfilment Charge + Other Charges</li><li>Where PlusBus details are included, using the Journey Origin and/or Destination NLC, validate the appropriate PlusBus ticket details, (Including Plusbus NLC codes and plusbus fares)</li><li>
          Where PlusBus details are included:
          <ul><li>The Period of Validity should only be: 7day, 1 month, 3 month or annual</li><li>The Journey and PlusBus ticket validity must match the season ticket duration</li></ul></li><li>When retail chanel is OnBoard sum of all transactions must be equals to total transaction value</li><li>Start date not greater than current date plus x days (configurable) set by retail channel</li><li>If renewal flag or changeover flag is TRUE and retail channel = Tkt Office and fulfilment method is CCST then original ticket number must be present</li><li>The (original) ticket number if present must be found in the customer’s sales record</li><li>If the renewal flag is TRUE and the retail channel = Ticket Office and the original ticket has expired then the start date of the new ticket must be no more than 28 days after the expiry date of the old ticket (otherwise this cannot be considered as a renewal)</li><li>If the renewal flag is TRUE and the retail channel = Ticket Office and the original ticket has not expired then the start date of the new ticket must be no more than 28 days before the expiry date of the old ticket (In this case it is a rule that the existing ticket must be surrendered and cancelled)</li><li>If the renewal flag is TRUE and the retail channel = Ticket office and the original ticket has not yet expired the date of the sale (the current system date) cannot be more than x days in advance where x is configurable by retail channel</li><li>If the renewal flag is TRUE and the retail channel = Ticket office then PoV requested for new ticket must be for at least one month</li><li>Check if a 7 day season ticket sale/renewal business rule applies (see below in notes)</li><li>If retail channel = TVM then check PoV is = 7days or &gt;=1 month and &lt;10.5 months</li><li>If season ticket renewal flag or season ticket changeover flag is TRUE then retail channel must be Ticket Office</li><li>Where fulfilment option is CCST, the time of sale of 7 day season ticket at TVM or Ticket office is &lt;1 business day and after 1200 of the previous business day from the start date of the ticket.  This rule will need to be relaxed over Xmas period</li><li>Check the operator/user credentials has permission for this call (see latest version of FEWS Permissions)</li><li>Check SDCI count is contiguous for on Board RC</li><li>For Car Parking Tickets the Ticket Type will be “ZVG”.</li><li>For Bike reservations the Ticket Type will be “ZVC”</li><li>Vehicle Registration No is mandatory for Parking Details if Ticket Type is ZVG(Car Parking)</li><li>Where RC =On Board and Ticket office and ticket type is weekly season (7DS/7DF), then AND customer id is a virtual one then customer name must be provided</li><li>When entered, the eVoucher Code must exist and be associated with the customer ID in the Request</li><li>The Period of Validity is less than 12 months but has the same season ticket factor as a 12 month season</li><li>For 7-day season tickets fulfilled by Ticket On Departure, start date must not be greater than current date plus y days (configurable, and distinct from value used by business validation rule 22 above), set by retail channel</li><li>When Fulfilment method is not Smart, Photocard Id field must be present.</li><li>DeliveryAddressId is mandatory for annual season ticket regardless of whether in Gold Card area and regardless of the fulfilment method specified.</li><li>The fulfilment options for the Flexi-Season is limited to eTicket only. </li><li>The requests containing Plusbus add-ons is rejected for the Flexi-Season.</li><li>The requests containing Parking supplements is rejected for the Flexi-Season.</li><li>Passenger photocard id is a mandatory field for the Flexi-Season.</li></ol></p><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Examples</span></div><div id="ID2RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EABABBA_tab1" class="codeSnippetContainerTabSingle">Example PurchaseSeasonTicket Request</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EABABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EABABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EABABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:soapenv</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span> <span class="highlight-xml-attribute-name">xmlns:ns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:vix</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.datacontract.org/2004/07/Vix.Cbe.Infrastructure"</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:SalesPointDetails</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Nlc</span><span class="highlight-xml-bracket">&gt;</span>9999<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Nlc</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:WindowNumber</span><span class="highlight-xml-bracket">&gt;</span>3<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:WindowNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:MachineNumber</span><span class="highlight-xml-bracket">&gt;</span>0003<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:MachineNumber</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:SalesPointDetails</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:PurchaseSeasonTicketRequest</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CustomerId</span><span class="highlight-xml-bracket">&gt;</span>1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CustomerId</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TotalRailProductValue</span><span class="highlight-xml-bracket">&gt;</span>141900<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:TotalRailProductValue</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Origin</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Crs</span><span class="highlight-xml-bracket">&gt;</span>EUS<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Crs</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Nlc</span> <span class="highlight-xml-attribute-name">xsi:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span> <span class="highlight-xml-attribute-name">xmlns:xsi</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Origin</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Destination</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Crs</span><span class="highlight-xml-bracket">&gt;</span>MAN<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Crs</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Nlc</span> <span class="highlight-xml-attribute-name">xsi:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span> <span class="highlight-xml-attribute-name">xmlns:xsi</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Destination</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RenewalFlag</span><span class="highlight-xml-bracket">&gt;</span>false<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RenewalFlag</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TicketNumber</span> <span class="highlight-xml-attribute-name">xsi:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span> <span class="highlight-xml-attribute-name">xmlns:xsi</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Duration</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:StartDate</span><span class="highlight-xml-bracket">&gt;</span>2017-08-10T00:00:00<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:StartDate</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:PeriodOfValidity</span><span class="highlight-xml-bracket">&gt;</span>01M00D<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:PeriodOfValidity</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Duration</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:FareSignature</span><span class="highlight-xml-bracket">&gt;</span>PSS|IWC|00000||1072|0438<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:FareSignature</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Fare</span><span class="highlight-xml-bracket">&gt;</span>138550<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Fare</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:PassengerType</span><span class="highlight-xml-bracket">&gt;</span>Adult<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:PassengerType</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RailcardCode</span> <span class="highlight-xml-attribute-name">xsi:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span> <span class="highlight-xml-attribute-name">xmlns:xsi</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:ParkingDetails</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Zero or more repetitions:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:ParkingDetail</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TicketType</span><span class="highlight-xml-bracket">&gt;</span>ZVG<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:TicketType</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:OriginStationNlc</span><span class="highlight-xml-bracket">&gt;</span>1444<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:OriginStationNlc</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:StationDescription</span><span class="highlight-xml-bracket">&gt;</span>Euston<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:StationDescription</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:StartDate</span><span class="highlight-xml-bracket">&gt;</span>2017-08-01<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:StartDate</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:ValidUntil</span><span class="highlight-xml-bracket">&gt;</span>2017-10-01<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:ValidUntil</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:VehicleRegNo</span><span class="highlight-xml-bracket">&gt;</span>Ke000KS<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:VehicleRegNo</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Validity</span><span class="highlight-xml-bracket">&gt;</span>02M00D<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Validity</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Fare</span><span class="highlight-xml-bracket">&gt;</span>2000<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Fare</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:ParkingDetail</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:ParkingDetails</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:FulfilmentDetails</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:FulfilmentMethod</span><span class="highlight-xml-bracket">&gt;</span>CcstSpecialDelivery<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:FulfilmentMethod</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:DeliveryAddressId</span><span class="highlight-xml-bracket">&gt;</span>1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:DeliveryAddressId</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:SmartcardDetail</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:SmartcardNumber</span><span class="highlight-xml-bracket">&gt;</span>123456789123456789<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:SmartcardNumber</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:SmartcardDetail</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CollectionLocation</span><span class="highlight-xml-bracket">&gt;</span>1444<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CollectionLocation</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:PassengerDocumentDetails</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:PassengerName</span><span class="highlight-xml-bracket">&gt;</span>Jack Bean<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:PassengerName</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Postcode</span><span class="highlight-xml-bracket">&gt;</span>KW17 2AN<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Postcode</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:PhotocardId</span><span class="highlight-xml-bracket">&gt;</span>1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:PhotocardId</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:PassengerDocumentDetails</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CtrReference</span> <span class="highlight-xml-attribute-name">xsi:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span> <span class="highlight-xml-attribute-name">xmlns:xsi</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="highlight-xml-bracket">/&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:FulfilmentCharge</span><span class="highlight-xml-bracket">&gt;</span>350<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:FulfilmentCharge</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:ETicketTypeToEmail</span><span class="highlight-xml-bracket">&gt;</span>None<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:ETicketTypeToEmail</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:FulfilmentDetails</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:OtherChargesDetails</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TotalValueOtherCharges</span><span class="highlight-xml-bracket">&gt;</span>1000<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:TotalValueOtherCharges</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:OtherCharges</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-comment">&lt;!--Zero or more repetitions:--&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:OtherCharge</span> <span class="highlight-xml-attribute-name">xsi:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span> <span class="highlight-xml-attribute-name">xmlns:xsi</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="highlight-xml-bracket">/&gt;</span>
          <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:OtherCharge</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:ChargeType</span><span class="highlight-xml-bracket">&gt;</span>90203<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:ChargeType</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:ChargeValue</span><span class="highlight-xml-bracket">&gt;</span>1000<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:ChargeValue</span><span class="highlight-xml-bracket">&gt;</span>
          <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:OtherCharge</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:OtherCharges</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:OtherChargesDetails</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:SubChannel</span><span class="highlight-xml-bracket">&gt;</span>Company<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:SubChannel</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:DateOfBirth</span><span class="highlight-xml-bracket">&gt;</span>1980-05-11<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:DateOfBirth</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:IsEligibleForLoyalty</span><span class="highlight-xml-bracket">&gt;</span>true<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:IsEligibleForLoyalty</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-comment">&lt;!--Optional:--&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CashbackCharityId</span><span class="highlight-xml-bracket">&gt;</span>0a8112a2-a9c8-4d09-a902-3da63fe02339<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CashbackCharityId</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:PurchaseSeasonTicketRequest</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EABABBA");</script><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAABBA_tab1" class="codeSnippetContainerTabSingle">Example PurchaseSeasonTicket Response</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EAAABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:s</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">PerformanceInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>233<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>72<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">PerformanceInformation</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">FewsInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>5.1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Revision</span> <span class="highlight-xml-attribute-name">i:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span> <span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>24.10<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">FewsInformation</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">PurchaseSeasonTicketResponse</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>17SMK59VEI<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">PurchaseSeasonTicketResponse</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABBA");</script></div></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Revision History</span></div><div id="ID4RBSection" class="collapsibleSection"><table><tr><th>Date</th><th>Version</th><th>Description</th></tr><tr><td>17/01/2019</td><td>23.2</td><td>FEWS 5.1 Purchase Season Ticket</td></tr><tr><td>04/01/2019</td><td>23.3</td><td>Added eTicketTypeToEmail into request</td></tr><tr><td>01/08/2019</td><td>24.1</td><td>Added MissingDeliveryAddress validation error.</td></tr><tr><td>11/05/2020</td><td>24.2</td><td>Added DateOfBirth field into request and MissingPassengerDetails validation error.</td></tr><tr><td>18/06/2020</td><td>24.3</td><td>Added IsEligibleForLoyalty and CashbackPreference into request.</td></tr><tr><td>13/08/2020</td><td>24.4</td><td>CashbackPreference replaced with CashbackCharityId.</td></tr><tr><td>08/02/2021</td><td>24.5</td><td><ul><li>Changed PhotocardId field to be optional when fulfilment method is Smart. Removed update of new smartcards for a customer during this call.</li><li>Added PassengerName mandatory validation.</li></ul></td></tr><tr><td>16/02/2021</td><td>24.6</td><td>Removed request new smart card from purchase season ticket.</td></tr><tr><td>15/03/2021</td><td>24.7</td><td>Removed removed all validation for eTicket fulfilment type within Cold Card Area and used the same validation error to validate annual season ticket regardless of whether in Gold Card area and regardless of the fulfilment method specified.</td></tr><tr><td>16/04/2021</td><td>24.8</td><td>The validation for Flexi-Season ticket has been added.</td></tr><tr><td>16/04/2021</td><td>24.9</td><td>Enhancement validation of CollectionLocation - LocationId must exist for station smartcard.</td></tr><tr><td>12/07/2021</td><td>24.10</td><td>Removed duplicate of PhotocardId from request.</td></tr></table></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID5RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="d1d9ea92-601d-9061-c982-a2d7695eafe6.htm">ICbeOnboardService Interface</a></div><div class="seeAlsoStyle"><a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>