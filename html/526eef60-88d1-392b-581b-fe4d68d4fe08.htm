<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CbeTvmService.CancelTransaction Method </title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="CancelTransaction method" /><meta name="System.Keywords" content="CbeTvmService.CancelTransaction method" /><meta name="Microsoft.Help.F1" content="Vix.Cbe.WebService.CbeTvmService.CancelTransaction" /><meta name="Microsoft.Help.Id" content="M:Vix.Cbe.WebService.CbeTvmService.CancelTransaction(Vix.Cbe.WebService.Contracts.Tvm.CancelTransactionMessageRequestSpdAuthV1)" /><meta name="Description" content="The purpose of this FEWS is to allow the TVM to cancel a sales transaction that has been confirmed by FEWS 6.2 but print message not yet available. The FEWS updates the sales the transaction and fulfilment statuses." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Vix.Cbe.WebService" /><meta name="file" content="526eef60-88d1-392b-581b-fe4d68d4fe08" /><meta name="guid" content="526eef60-88d1-392b-581b-fe4d68d4fe08" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.5.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Central Booking Engine Class Library<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine Class Library" tocid="roottoc">Central Booking Engine Class Library</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine" tocid="e7529a28-e260-e3d8-0718-b3fc28f03686">Central Booking Engine</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/26210088-6c4f-d952-a0af-51ddaeac4a15.htm" title="Vix.Cbe.WebService" tocid="26210088-6c4f-d952-a0af-51ddaeac4a15">Vix.Cbe.WebService</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/abf32f96-6674-87dc-fd0d-5338ca4f4294.htm" title="CbeTvmService Class" tocid="abf32f96-6674-87dc-fd0d-5338ca4f4294">CbeTvmService Class</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/4cf7b8db-20c0-d680-f8e6-507bddde8d5c.htm" title="CbeTvmService Methods" tocid="4cf7b8db-20c0-d680-f8e6-507bddde8d5c">CbeTvmService Methods</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4a2f3f7c-3f34-4262-b81e-68c06cf4a3ba.htm" title="AmendReservation Method " tocid="4a2f3f7c-3f34-4262-b81e-68c06cf4a3ba">AmendReservation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e1e65f7e-2ab8-1b83-aece-f61333dc7a11.htm" title="CancelReservation Method " tocid="e1e65f7e-2ab8-1b83-aece-f61333dc7a11">CancelReservation Method </a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/526eef60-88d1-392b-581b-fe4d68d4fe08.htm" title="CancelTransaction Method " tocid="526eef60-88d1-392b-581b-fe4d68d4fe08">CancelTransaction Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/8fea79ff-189d-9d6a-f781-f7c40ae40d1a.htm" title="CustomerCardLogin Method " tocid="8fea79ff-189d-9d6a-f781-f7c40ae40d1a">CustomerCardLogin Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5c41f7cd-3e72-c5db-f62d-e846d0abf694.htm" title="GetCoachesInformation Method " tocid="5c41f7cd-3e72-c5db-f62d-e846d0abf694">GetCoachesInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c7a508d6-de3c-02ca-c0cc-b04be4550560.htm" title="GetCoachesSeatAvailability Method " tocid="c7a508d6-de3c-02ca-c0cc-b04be4550560">GetCoachesSeatAvailability Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d16ae95a-70f6-f222-21bd-fb40f63e33d5.htm" title="GetCtrDetails Method " tocid="d16ae95a-70f6-f222-21bd-fb40f63e33d5">GetCtrDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/bfaaa850-7892-fce8-9c09-5d1e6cab9437.htm" title="GetCustomerSegment Method " tocid="bfaaa850-7892-fce8-9c09-5d1e6cab9437">GetCustomerSegment Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/8e16b5d7-47fc-6e71-ecc1-7c2e9b231acf.htm" title="GetFaresInformation Method " tocid="8e16b5d7-47fc-6e71-ecc1-7c2e9b231acf">GetFaresInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a817fdca-64ba-d31d-c79e-09c2a22ccb06.htm" title="GetOptionalServices Method " tocid="a817fdca-64ba-d31d-c79e-09c2a22ccb06">GetOptionalServices Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/f31b3620-310f-a32a-4461-6fbacbecdb85.htm" title="GetPresalesFulfilmentOptions Method " tocid="f31b3620-310f-a32a-4461-6fbacbecdb85">GetPresalesFulfilmentOptions Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0388f537-421d-dedd-ffae-b7170b521227.htm" title="GetRouteInformation Method " tocid="0388f537-421d-dedd-ffae-b7170b521227">GetRouteInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/50777f26-01a0-054e-14bf-f4ac5579c1f8.htm" title="GetSalesHistory Method " tocid="50777f26-01a0-054e-14bf-f4ac5579c1f8">GetSalesHistory Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/db52a24a-7c7c-ea4f-8a57-791c9d14c34a.htm" title="GetSeasonTicketFares Method " tocid="db52a24a-7c7c-ea4f-8a57-791c9d14c34a">GetSeasonTicketFares Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a393927e-c028-3c0c-a683-1634632e57a2.htm" title="GetStoppingPatterns Method " tocid="a393927e-c028-3c0c-a683-1634632e57a2">GetStoppingPatterns Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/2375f5ab-8d12-4909-d7f3-a944e29e267c.htm" title="Heartbeat Method " tocid="2375f5ab-8d12-4909-d7f3-a944e29e267c">Heartbeat Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/867c1e85-d50d-7a65-aef8-2b33b4f1165c.htm" title="PrintCompleted Method " tocid="867c1e85-d50d-7a65-aef8-2b33b4f1165c">PrintCompleted Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/3e74eb19-af85-8de9-d866-716946e0d9de.htm" title="PrintCtrTickets Method " tocid="3e74eb19-af85-8de9-d866-716946e0d9de">PrintCtrTickets Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5ab80034-a50a-e4dd-0a3d-4b4d327a6bac.htm" title="PurchaseCancellation Method " tocid="5ab80034-a50a-e4dd-0a3d-4b4d327a6bac">PurchaseCancellation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/ca55af35-f5d6-52de-afa1-b16d25926b70.htm" title="PurchaseConfirmation Method " tocid="ca55af35-f5d6-52de-afa1-b16d25926b70">PurchaseConfirmation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/fbc82769-8cbf-20bd-f5f7-71407154eaf1.htm" title="PurchaseSeasonTicket Method " tocid="fbc82769-8cbf-20bd-f5f7-71407154eaf1">PurchaseSeasonTicket Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/cdc4495a-d453-fa64-463e-0bb826c682d5.htm" title="PurchaseTicket3 Method " tocid="cdc4495a-d453-fa64-463e-0bb826c682d5">PurchaseTicket3 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c8f321aa-7f6b-5363-4796-f0ed8349bbf4.htm" title="RedeemTravelPass Method " tocid="c8f321aa-7f6b-5363-4796-f0ed8349bbf4">RedeemTravelPass Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0dfb371e-dd14-349d-bdc4-d02da41974ea.htm" title="RefundConfirmation Method " tocid="0dfb371e-dd14-349d-bdc4-d02da41974ea">RefundConfirmation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/dbb64264-85c0-80c9-f6b9-1c0053c254a8.htm" title="RequestItinerary Method " tocid="dbb64264-85c0-80c9-f6b9-1c0053c254a8">RequestItinerary Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4001edfe-26a5-6736-667c-01c7ad12eb77.htm" title="ReservationBooking Method " tocid="4001edfe-26a5-6736-667c-01c7ad12eb77">ReservationBooking Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/7b29c164-0692-8a96-22f5-3a78deed6692.htm" title="ReservationBooking2 Method " tocid="7b29c164-0692-8a96-22f5-3a78deed6692">ReservationBooking2 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d956bccd-3cf2-0987-ab22-e07771fffce4.htm" title="SalesOfferingAuthorisation Method " tocid="d956bccd-3cf2-0987-ab22-e07771fffce4">SalesOfferingAuthorisation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0246e0ff-fd90-5ec6-94cc-cfd5e0ad0f6a.htm" title="TvmLogin Method " tocid="0246e0ff-fd90-5ec6-94cc-cfd5e0ad0f6a">TvmLogin Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d537e1d4-61de-862f-ff61-69dce7c46ec0.htm" title="TvmLogout Method " tocid="d537e1d4-61de-862f-ff61-69dce7c46ec0">TvmLogout Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e3373c8b-a19e-b35e-39df-49c4a722fd76.htm" title="UnlockCtr Method " tocid="e3373c8b-a19e-b35e-39df-49c4a722fd76">UnlockCtr Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0ba00d5e-9333-6f27-8474-b597b8e7e896.htm" title="UpdateLoyaltyCard Method " tocid="0ba00d5e-9333-6f27-8474-b597b8e7e896">UpdateLoyaltyCard Method </a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>CbeTvmService<span id="LST477D3DEA_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST477D3DEA_0?cpp=::|nu=.");</script>CancelTransaction Method </h1></td></tr></table><span class="introStyle"></span> <div class="summary">
            The purpose of this FEWS is to allow the TVM to cancel a sales transaction that has been confirmed by FEWS 6.2 but print message not yet available.
            The FEWS updates the sales the transaction and fulfilment statuses.If the print message has been generated and SDCI record created the output will signify not cancelled.
            </div><p> </p>
    <strong>Namespace:</strong> 
   <a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService</a><br />
    <strong>Assembly:</strong>
   Vix.Cbe.WebService (in Vix.Cbe.WebService.dll) Version: 0.1.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EACA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">[<span class="identifier">PerformanceCounterAttribute</span>(<span class="keyword">true</span>, <span class="keyword">typeof</span>(<span class="identifier">ServiceMethodPerformanceCounter</span>), "CBE-Operation.V7", 
	"Tvm-CancelTransaction", Target = <span class="identifier">CbeActivity</span>.CancelTransaction)]
<span class="keyword">public</span> <span class="identifier">Task</span>&lt;<span class="identifier">CancelTransactionMessageResponseV1</span>&gt; <span class="identifier">CancelTransaction</span>(
	<span class="identifier">CancelTransactionMessageRequestSpdAuthV1</span> <span class="parameter">request</span>
)</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">request</span></dt><dd>Type: <a href="1e7508d5-a213-fbc0-8ce2-83dfa1915610.htm">Vix.Cbe.WebService.Contracts.Tvm<span id="LST477D3DEA_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST477D3DEA_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CancelTransactionMessageRequestSpdAuthV1</a><br />The request.</dd></dl><h4 class="subHeading">Return Value</h4>Type: <a href="https://docs.microsoft.com/dotnet/api/system.threading.tasks.task-1" target="_blank" rel="noopener noreferrer">Task</a><span id="LST477D3DEA_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST477D3DEA_2?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script><a href="8f02f553-51bf-508b-f34b-b661cf08470f.htm">CancelTransactionMessageResponseV1</a><span id="LST477D3DEA_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST477D3DEA_3?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script><br />Result of cancel transaction..<h4 class="subHeading">Implements</h4><a href="3f67f484-34b4-83e4-1042-ef12ae6beb72.htm">ICbeTvmService<span id="LST477D3DEA_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST477D3DEA_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CancelTransaction(CancelTransactionMessageRequestSpdAuthV1)</a><br /></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Remarks</span></div><div id="ID3RBSection" class="collapsibleSection"><p><b>BACKGROUND</b></p><p>
      The purpose of this FEWS is to allow the TVM to cancel a sales transaction. The FEWS
      covers the following cancellation scenarios
    </p><ol><li><b>Scenario I</b> – Cancellation of the transaction after purchase confirmation (FEWS 6.2) before print message is created.
      </li><li><b>Scenario II</b> – Cancellation of the transaction after FEWS 6.2 where Print has failed partially or completely.
      </li><li><b>Scenario III</b> – Cancellation of the transaction after a TOD print or other failure for a CTR.
      </li><li><b>Scenario IV</b> – Cancellation of a transaction which is incomplete and is preventing TVM logout (FEWS 1.3).
      </li></ol><p>
      If the cancel call relates to a walk up sale at the TVM then the input is the sales
      transaction number. If the cancel call relates to a TOD collection at the TVM then the
      CTR reference should be input.
      The document has been updated to reflect the approach to managing the locking and
      unlocking of the LSM database as documented in Fetched Delivery Summary V4.3.
    </p><p><b>BUSINESS PROCESS CONTEXT</b></p><p><img src="\Content\FEWS 7.6 Cancel transaction\BPC.jpg" /></p><p><b>PROCESS DIAGRAM</b></p><p>
      This FEWS is only called if any part of the print message fails to print successfully. On receipt of FEWS 7.6 Cancel transaction request the CBE retrieves the local CTR record and updates the booking print/flag to P/2 signifying print failure. The CBE then writes this to the CTR record in the LSM database and then the CBE releases the lock on the CTR record. There is no change to the I/O data of this call.
    </p><p>
      Once the record is unlocked on the LSM database the CTR can then be retrieved and collected at another TVM/ticket office in the usual way.  The CTR can then be printed at another sales point at which point if it is successful the state will go from P/2 to 4/3  - print successful. Once the CTR record has been updated on the LSM database the CTR record is deleted from the CBE cache.
    </p><p>
      If on receipt of this call the CTR record is not found in the cache (as it may have been cleared down by the background housekeeping task), then the TVM must repeat FEWS 7.1.1 which will restore the CTR to the local cache and lock the record on the LSM database.  See Fetched Delivery Summary V4.3 for more details.
    </p><p><b>SCENARIO I</b></p><p><img src="\Content\FEWS 7.6 Cancel transaction\SCENARIO1.jpg" /></p><p><b>PROCESS DESCRIPTION</b></p><p>
      This FEWS triggers the cancellation of the TVM sales transaction that has been purchased but the print message is not yet generated. The input includes the Sales Transaction Number and the cancel reason code which should be 1 for this scenario.
    </p><p>
      The CBE validates the request for Sales point details, sales transaction status and fulfilment status, in order for this scenario to be processed successfully, The sales transaction status should be Confirmed or TvmPrintRequestNotReady and Fulfillment status should be Pending. Once this is verified, CBE then checks if the Print Message has NOT been generated for the sales transaction number yet; it cancels any associated reservations and updates the sales transaction status to Cancelled.
    </p><p>
      The CBE outputs indicators showing the TVM Cancel flag as TRUE and the SDCI update flag as FALSE (supplied for information meaning no SDCI has been written), along with the sales transaction number and an acknowledgement date timestamp.
    </p><p>
      In the event that the print message is ready then the cancel request is rejected as shown in the above diagram in the OR case.  In this event the CBE has already written SDCI for the sale so this request will then trigger the CBE to write a non-issue record in this case. The CBE then outputs indicators showing the TVM cancel flag as FALSE and the SDCI update flag as TRUE.  The table below shows the possible states for the indicators.
    </p><div class="tableSection"><table><tr><td><b>Scenario</b></td><td><b>TVM Cancel Flag</b></td><td><b>SDCI Record Update Flag</b></td></tr><tr><td>Cancelled Sale Before Print Message Created</td><td>TRUE</td><td>FALSE</td></tr><tr><td>Cancelled Sale After Print Message Created</td><td>FALSE</td><td>TRUE*</td></tr><tr><td>Cancelled TOD collection</td><td>FALSE</td><td>TRUE*</td></tr></table></div><p>
      * Signifies cases where a non-issue record is written in SDCI by the CBE.
    </p><p><b>SCENARIO II</b></p><p><img src="\Content\FEWS 7.6 Cancel transaction\SCENARIO2.jpg" /></p><p><b>PROCESS DESCRIPTION</b></p><p>
      This FEWS triggers the cancellation of the TVM sales transaction that has been purchased previously, but post purchase request for print tickets has failed partially or completely at the TVM. The input includes the Sales Transaction Number and the cancel reason code that should be 2 for this case.
    </p><p>
      The CBE validates the request for Sales point details and sales transaction status and fulfilment status. In order for this scenario to be processed successfully, sales transaction status should be Failed and Fulfilment status should be Failed. Once this is verified, the CBE then creates the SDCI non-issue records corresponding to the original sale. The fulfilment status and sales transaction status is updated to Void.
    </p><p>
      The CBE output to the TVM includes the TVM Cancel flag as FALSE (meaning cancelled after the print message has been sent) and SDCI update as TRUE (meaning SDCI non issue records have been written), along with the sales transaction number and acknowledgement date timestamp.
    </p><p><b>SCENARIO III</b></p><p><img src="\Content\FEWS 7.6 Cancel transaction\SCENARIO3.jpg" /></p><p><b>PROCESS DESCRIPTION</b></p><p>
      In this case the FEWS indicates the  failure of the TOD CTR, where the CTR has been retrieved from the CBE cache.  The TVM has previously requested the CTR (FEWS 7.2) and then the printing has failed partially or completely. The input of FEWS 7.6 includes the CTR - Customer Transaction Reference number (CBE or foreign) and the cancel reason code as 3. As the input in this case of FEWS 7.6 relates to a CTR (CBE or foreign), this means that the TOD collection has resulted in a print failure and so must be non issued.  As FEWS 7.2 (get CTR for printing) has triggered the SDCI creation for the TOD fulfilment previously, then the corresponding non-issue records are written, following receipt of this call.
    </p><p>
      For any other case of TOD fulfilment failure at the TVM reason code 4 should be used.
    </p><p>
      On receipt of this call if the input relates to a CTR then the CBE retrieves the CBE record from the local cache and updates the record to put the booking/print flag to P/2 Print failure.  The CBE then uses this record to update the corresponding CTR record on the LSM database to put the booking/print flag to P/2 Print failure and then unlock the record. On completion of this update the CBE will delete the CTR record from the local cache. This is as per the Fetched Delivery document V4.3.  By releasing the lock of the CTR record following the update of the record on the LSM database, the customer may go to another TVM or the ticket office to collect his TOD ticket.  The CTR can then be printed at another sales point at which point if it is successful the state will go from P/2 to 4/3  - print successful.
      The output from the CBE to this call returns TVM Cancel as FALSE and SDCI update as TRUE along with CTR number and an acknowledgement date timestamp.
    </p><p><b>SCENARIO IV</b></p><p>
      In this case, the TVM has attempted to close down/ close shift  and performs a FEWS 1.3 TVM logout. If there are incomplete transactions awaiting printing and print messages have not been received by the TVM or other delays within the CBE, then the FEWS 1.3 output will contain a list of incomplete transactions. FEWS 7.6 then is called as many times as required to cancel the transactions so that the shift can then be closed by repeating FEWS 1.3. In this case the reason code used in the input of FEWS 7.6 should be reason code 5 meaning cancel incomplete transaction.
    </p><b>ASSUMPTIONS</b><ol><li>
        It is assumed that this call is applicable for where a cash payment has been taken or card authorisation has been received. Return of monies to the customer or cancellation of card authorisation will be the responsibility of the TVM FEA.
      </li><li>
        It is assumed that in most cases the CBE will return a TVM cancel flag = FALSE response which will not cancel the ticket purchase as the print message and SDCI record will have already been written. However in some cases when the request immediately follows (within a few seconds) it will be possible to get the TVM cancel flag = TRUE response as the CBE not have yet created the print message.
      </li><li>
        It is assumed that following this call to indicate a print failure the TVM will NOT request FEWS 7.2 again to attempt to retry to print the tickets as agreed with PKN.
      </li><li>
        It is assumed that where this call is made due to a problem with closing the shift, the TVM will complete this call and then recall FEWS 1.3 which should then allow the shift to close as all incomplete transactions will have been cancelled.
      </li><li>
        It is assumed that for CTR collection if neither FEWS 7.5 nor FEWS 7.6 is received from the TVM, the TVM will trigger FEWS 7.1.2 to unlock the CTR previously locked by FEWS 7.1.1.
      </li></ol><p><b>VALIDATION </b></p><p>
      The following validation checks are made by the CBE on the data provided by the FEA. Failure to meet these checks will result in appropriate error messages as shown in the appropriate API guide.
      <ol><li>Sales point details are valid and exist.</li><li>Transaction must exist.</li><li>
          Sales Transaction and Fulfilment status should be checked against Cancel reason code to ensure TVM is sending a valid request as follows:
          <div class="tableSection"><table><tr><td><b>Cancel Reason Code</b></td><td><b>Cancel Reason Description</b></td><td><b>Sales Transaction Status</b></td><td><b>Fulfilment Status</b></td></tr><tr><td>1</td><td>Cancel Pre Printing</td><td>Confirmed</td><td>Pending</td></tr><tr><td>2</td><td>Cancel Print Failure</td><td>TVMPrintRequestSupplied</td><td>SenttoPrint</td></tr><tr><td>3</td><td>Cancel TOD Print Failure CTR</td><td>TVMPrintRequestSupplied</td><td>SenttoPrint</td></tr><tr><td>4</td><td>Cancel TOD other failure</td><td>Confirmed</td><td>Failed / ReadyToPrint (Failed)</td></tr><tr><td>5</td><td>Cancel Incomplete Transaction</td><td>Confirmed / TVMPrintRequestNotReady / TVMPrintRequestSupplied</td><td>Pending / TVMPrintRequested / ReadyToPrint / SenttoPrint</td></tr></table></div></li><li>If the Sales Transaction status or the Fulfilment states are in any other state for the cancel reason code provided, the request shall be rejected.</li><li>Check the CTR number exists in the cache*.</li><li>Check the booking/print flag = 9/2 or P/2.</li><li>If the booking/print flag is P/2 then check if CBE has a pseudo sales transaction number for this, if yes then reject this request, if no then accept this call. (If no – means that the P/2 was set by another TIS previously and is a valid state and is NOT a repeated failure call within the CBE).</li><li>Check if CTR number provided then Cancel reason code is 3 or 4.</li><li>Reason code exists and is one of the list above.</li><li><p>
            *Note that in the unlikely event of that the CTR is not in the cache when the TVM calls FEWS 7.6 (or FEWS 7.5), then FEWS 7.1.1 must be called again to put the CTR into the cache and lock it. The frequency of the clear down of the CTRs in the cache is being considered to ensure that the likelihood of the CTR being absent is low.
          </p></li></ol></p><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Examples</span></div><div id="ID2RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EADABBA_tab1" class="codeSnippetContainerTabSingle">Example CancelTransaction request with ctr reference</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EADABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EADABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EADABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;?</span><span class="highlight-xml-tag">xml</span> <span class="highlight-xml-attribute-name">version</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"1.0"</span> <span class="highlight-xml-attribute-name">encoding</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"utf-8"</span> <span class="highlight-xml-bracket">?&gt;</span>
<span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:soapenv</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span> <span class="highlight-xml-attribute-name">xmlns:ns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:SalesPointDetails</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Nlc</span><span class="highlight-xml-bracket">&gt;</span>1072<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Nlc</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:WindowNumber</span><span class="highlight-xml-bracket">&gt;</span>1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:WindowNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:MachineNumber</span><span class="highlight-xml-bracket">&gt;</span>0001<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:MachineNumber</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:SalesPointDetails</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CancelTransactiondRequest</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CtrReference</span><span class="highlight-xml-bracket">&gt;</span>RGCJ29L6<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CtrReference</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:JourneyReferenceNumbers</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:JourneyReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>RGCJ29L6<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:JourneyReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>
        <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:JourneyReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>8B43X68B<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:JourneyReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:JourneyReferenceNumbers</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CancelReasonCode</span><span class="highlight-xml-bracket">&gt;</span>CancelTodPrintFailure<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CancelReasonCode</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CancelTransactiondRequest</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EADABBA");</script><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACABBA_tab1" class="codeSnippetContainerTabSingle">Example CancelTransaction response with ctr reference</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EACABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;?</span><span class="highlight-xml-tag">xml</span> <span class="highlight-xml-attribute-name">version</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"1.0"</span> <span class="highlight-xml-attribute-name">encoding</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"utf-8"</span> <span class="highlight-xml-bracket">?&gt;</span>
<span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:s</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">PerformanceInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>924<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>241<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">PerformanceInformation</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">FewsInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>7.6<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Revision</span> <span class="highlight-xml-attribute-name">i:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span><span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>6.1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">FewsInformation</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CancelTransactionResponse</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">TransactionNumber</span> <span class="highlight-xml-attribute-name">i:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span><span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CtrReference</span><span class="highlight-xml-bracket">&gt;</span>RGCJ29L6<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CtrReference</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">DateTime</span><span class="highlight-xml-bracket">&gt;</span>2017-08-10T16:42:31.3744378+02:00<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">DateTime</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">TvmCancelFlag</span><span class="highlight-xml-bracket">&gt;</span>false<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">TvmCancelFlag</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">SdciRecordUpdateFlag</span><span class="highlight-xml-bracket">&gt;</span>true<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">SdciRecordUpdateFlag</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CancelTransactionResponse</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACABBA");</script><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EABABBA_tab1" class="codeSnippetContainerTabSingle">Example CancelTransaction request with sales transaction</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EABABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EABABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EABABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;?</span><span class="highlight-xml-tag">xml</span> <span class="highlight-xml-attribute-name">version</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"1.0"</span> <span class="highlight-xml-attribute-name">encoding</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"utf-8"</span> <span class="highlight-xml-bracket">?&gt;</span>
<span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:soapenv</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span> <span class="highlight-xml-attribute-name">xmlns:ns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:SalesPointDetails</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Nlc</span><span class="highlight-xml-bracket">&gt;</span>1072<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Nlc</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:WindowNumber</span><span class="highlight-xml-bracket">&gt;</span>1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:WindowNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:MachineNumber</span><span class="highlight-xml-bracket">&gt;</span>0001<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:MachineNumber</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:SalesPointDetails</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CancelTransactiondRequest</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>17SMKK9HXP<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CancelReasonCode</span><span class="highlight-xml-bracket">&gt;</span>CancelIncompleteTransaction<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CancelReasonCode</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CancelTransactiondRequest</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EABABBA");</script><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAABBA_tab1" class="codeSnippetContainerTabSingle">Example CancelTransaction response with sales transaction</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EAAABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;?</span><span class="highlight-xml-tag">xml</span> <span class="highlight-xml-attribute-name">version</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"1.0"</span> <span class="highlight-xml-attribute-name">encoding</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"utf-8"</span> <span class="highlight-xml-bracket">?&gt;</span>
<span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:s</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">PerformanceInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>211<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>0<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">PerformanceInformation</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">FewsInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>7.6<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Revision</span> <span class="highlight-xml-attribute-name">i:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span><span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>6.1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">FewsInformation</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CancelTransactionResponse</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>17SMKK9HXP<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">TransactionNumber</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CtrReference</span> <span class="highlight-xml-attribute-name">i:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span><span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">DateTime</span><span class="highlight-xml-bracket">&gt;</span>2017-08-10T16:50:49.9347016+02:00<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">DateTime</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">TvmCancelFlag</span><span class="highlight-xml-bracket">&gt;</span>false<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">TvmCancelFlag</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">SdciRecordUpdateFlag</span><span class="highlight-xml-bracket">&gt;</span>true<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">SdciRecordUpdateFlag</span><span class="highlight-xml-bracket">&gt;</span>
    <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CancelTransactionResponse</span><span class="highlight-xml-bracket">&gt;</span>
  <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABBA");</script></div></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Revision History</span></div><div id="ID4RBSection" class="collapsibleSection"><table><tr><th>Date</th><th>Version</th><th>Description</th></tr><tr><td>10/08/2017</td><td>7.0</td><td>FEWS 7.6 Cancel transaction</td></tr></table></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID5RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="abf32f96-6674-87dc-fd0d-5338ca4f4294.htm">CbeTvmService Class</a></div><div class="seeAlsoStyle"><a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>