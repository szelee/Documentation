<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CbeTOService.CalculateRefundValue Method </title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="CalculateRefundValue method" /><meta name="System.Keywords" content="CbeTOService.CalculateRefundValue method" /><meta name="Microsoft.Help.F1" content="Vix.Cbe.WebService.CbeTOService.CalculateRefundValue" /><meta name="Microsoft.Help.Id" content="M:Vix.Cbe.WebService.CbeTOService.CalculateRefundValue(Vix.Cbe.WebService.Contracts.SalesTransaction.CalculateRefundValueMessageRequestAuthV1)" /><meta name="Description" content="This FEWS enables the Operator to request an automated calculation of the refund value for season tickets or point to point tickets using a refund type code (see notes below). The record is locked when this request is made to the CBE." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Vix.Cbe.WebService" /><meta name="file" content="06f7a457-0c40-9046-9de8-2cf65c7500f0" /><meta name="guid" content="06f7a457-0c40-9046-9de8-2cf65c7500f0" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.5.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Central Booking Engine Class Library<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine Class Library" tocid="roottoc">Central Booking Engine Class Library</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/e7529a28-e260-e3d8-0718-b3fc28f03686.htm" title="Central Booking Engine" tocid="e7529a28-e260-e3d8-0718-b3fc28f03686">Central Booking Engine</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/26210088-6c4f-d952-a0af-51ddaeac4a15.htm" title="Vix.Cbe.WebService" tocid="26210088-6c4f-d952-a0af-51ddaeac4a15">Vix.Cbe.WebService</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/84478d73-23dd-1bcd-02c4-86dcf17efc65.htm" title="CbeTOService Class" tocid="84478d73-23dd-1bcd-02c4-86dcf17efc65">CbeTOService Class</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/18f27a41-6185-e561-a27a-1140a1317471.htm" title="CbeTOService Methods" tocid="18f27a41-6185-e561-a27a-1140a1317471">CbeTOService Methods</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4a4c43e0-6462-c10a-fc45-902efff4ba19.htm" title="AmendReservation Method " tocid="4a4c43e0-6462-c10a-fc45-902efff4ba19">AmendReservation Method </a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/06f7a457-0c40-9046-9de8-2cf65c7500f0.htm" title="CalculateRefundValue Method " tocid="06f7a457-0c40-9046-9de8-2cf65c7500f0">CalculateRefundValue Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4cf3ceb8-14c2-e391-eb31-310718cf1f00.htm" title="CancelReservation Method " tocid="4cf3ceb8-14c2-e391-eb31-310718cf1f00">CancelReservation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/f60a3524-67aa-a0a9-bdb6-fdfbbe9dc4f3.htm" title="ChangeOperatorPassword Method " tocid="f60a3524-67aa-a0a9-bdb6-fdfbbe9dc4f3">ChangeOperatorPassword Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/95fe3795-cfa5-4f17-23a6-6d9955b0b895.htm" title="ConfirmFareForRefund Method " tocid="95fe3795-cfa5-4f17-23a6-6d9955b0b895">ConfirmFareForRefund Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0afd0493-9362-077c-d296-f1c21ec1640b.htm" title="CreateCustomerProfile Method " tocid="0afd0493-9362-077c-d296-f1c21ec1640b">CreateCustomerProfile Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4305ea38-baab-6b7f-4629-d6cccf4a2a42.htm" title="CustomerCardLogin Method " tocid="4305ea38-baab-6b7f-4629-d6cccf4a2a42">CustomerCardLogin Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/1024e4dc-9732-82b4-f168-246b1cf72fee.htm" title="DoNonissue Method " tocid="1024e4dc-9732-82b4-f168-246b1cf72fee">DoNonissue Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c40e4f27-8ed4-f07d-3992-34382987f5e5.htm" title="GetCoachesInformation Method " tocid="c40e4f27-8ed4-f07d-3992-34382987f5e5">GetCoachesInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/41455838-1475-c90c-0d6d-51d59a0c40fd.htm" title="GetCoachesSeatAvailability Method " tocid="41455838-1475-c90c-0d6d-51d59a0c40fd">GetCoachesSeatAvailability Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/8dfafb80-fe1d-7a68-4b0a-55fd10a0a5b6.htm" title="GetCtrDetails Method " tocid="8dfafb80-fe1d-7a68-4b0a-55fd10a0a5b6">GetCtrDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/58466bc8-7ce6-4db2-2d11-74ac6ca8319a.htm" title="GetCustomerAccountDetails Method " tocid="58466bc8-7ce6-4db2-2d11-74ac6ca8319a">GetCustomerAccountDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/14590662-fc9e-3d6b-9c8d-33de020854c6.htm" title="GetFaresInformation Method " tocid="14590662-fc9e-3d6b-9c8d-33de020854c6">GetFaresInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/df216370-8c11-8fb6-e6fd-278d9e0439d0.htm" title="GetOptionalServices Method " tocid="df216370-8c11-8fb6-e6fd-278d9e0439d0">GetOptionalServices Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/eaced294-1339-5b02-e112-eb716735e588.htm" title="GetPresalesFulfilmentOptions Method " tocid="eaced294-1339-5b02-e112-eb716735e588">GetPresalesFulfilmentOptions Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6ab4886b-7063-5038-1d2b-81a7750fc8fc.htm" title="GetRefundApplication Method " tocid="6ab4886b-7063-5038-1d2b-81a7750fc8fc">GetRefundApplication Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5ca47790-e4ca-2704-5815-e17ea8cca875.htm" title="GetRefundList Method " tocid="5ca47790-e4ca-2704-5815-e17ea8cca875">GetRefundList Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e519d1d6-5e33-a550-a422-a58bbf787275.htm" title="GetRefundList2 Method " tocid="e519d1d6-5e33-a550-a422-a58bbf787275">GetRefundList2 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/563640d4-ea5a-876a-e613-566f0d895baf.htm" title="GetReservationAvailability Method " tocid="563640d4-ea5a-876a-e613-566f0d895baf">GetReservationAvailability Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/07abb054-cef4-b733-65e4-4b6377517a18.htm" title="GetReservationServiceDetails Method " tocid="07abb054-cef4-b733-65e4-4b6377517a18">GetReservationServiceDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/20e46ae4-9e83-74bb-7e79-fab35ff90c7c.htm" title="GetRouteInformation Method " tocid="20e46ae4-9e83-74bb-7e79-fab35ff90c7c">GetRouteInformation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/ebe47095-2a84-6320-3ebd-124202d9f09c.htm" title="GetSalesBySalesPoint Method " tocid="ebe47095-2a84-6320-3ebd-124202d9f09c">GetSalesBySalesPoint Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c7ae9249-3c27-1dfa-5406-4dcdc40d5201.htm" title="GetSalesHistory Method " tocid="c7ae9249-3c27-1dfa-5406-4dcdc40d5201">GetSalesHistory Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/3640fb58-8728-0eec-cbfa-8c091bd4330f.htm" title="GetSalesTransactionDetails Method " tocid="3640fb58-8728-0eec-cbfa-8c091bd4330f">GetSalesTransactionDetails Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c4fe27ff-990d-6185-df8c-920bfbdae049.htm" title="GetSeasonTicketFares Method " tocid="c4fe27ff-990d-6185-df8c-920bfbdae049">GetSeasonTicketFares Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4a568000-598c-00cb-7b70-5682eaacb431.htm" title="GetStoppingPatterns Method " tocid="4a568000-598c-00cb-7b70-5682eaacb431">GetStoppingPatterns Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/76c6f987-4c12-6cfb-ca0e-52580ad46016.htm" title="MagStripeCheck Method " tocid="76c6f987-4c12-6cfb-ca0e-52580ad46016">MagStripeCheck Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/2eb4e42e-2d4d-e2c7-3273-12e008282e15.htm" title="MagStripeCheckStatus Method " tocid="2eb4e42e-2d4d-e2c7-3273-12e008282e15">MagStripeCheckStatus Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c6a9009d-8453-b080-43ec-140af6625293.htm" title="OperatorLogin Method " tocid="c6a9009d-8453-b080-43ec-140af6625293">OperatorLogin Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6b3010db-6120-eb1c-5209-e13871e306f2.htm" title="OperatorLogout Method " tocid="6b3010db-6120-eb1c-5209-e13871e306f2">OperatorLogout Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/c58f536a-0e28-be05-eefb-08c3c92d11b1.htm" title="Overprint Method " tocid="c58f536a-0e28-be05-eefb-08c3c92d11b1">Overprint Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/cf4e9596-4cb1-5f6e-ceda-4a404b1f77a3.htm" title="OverprintConfirmation Method " tocid="cf4e9596-4cb1-5f6e-ceda-4a404b1f77a3">OverprintConfirmation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/2590c879-34f2-a7a5-a5db-72b9d57553fb.htm" title="OverprintStatus Method " tocid="2590c879-34f2-a7a5-a5db-72b9d57553fb">OverprintStatus Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/0ca774c5-2500-4e83-9215-3eba17725028.htm" title="PaymentRefund Method " tocid="0ca774c5-2500-4e83-9215-3eba17725028">PaymentRefund Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/02e6a254-b4be-07e2-8883-00c66dba2c5f.htm" title="ProcessRefundApplication Method " tocid="02e6a254-b4be-07e2-8883-00c66dba2c5f">ProcessRefundApplication Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e2dbc73f-96c7-64ac-1a33-c0d35a521791.htm" title="PurchaseConfirmation Method " tocid="e2dbc73f-96c7-64ac-1a33-c0d35a521791">PurchaseConfirmation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/baca4d31-b3aa-78d6-75e5-0ab12643a7d6.htm" title="PurchaseExcessFare Method " tocid="baca4d31-b3aa-78d6-75e5-0ab12643a7d6">PurchaseExcessFare Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/a6df9ffd-3e12-9933-c358-e3350b2efe39.htm" title="PurchaseExcessSeasonFare Method " tocid="a6df9ffd-3e12-9933-c358-e3350b2efe39">PurchaseExcessSeasonFare Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/4c93bdbc-43de-fdce-b7fb-c22d5f998827.htm" title="PurchaseRailcard Method " tocid="4c93bdbc-43de-fdce-b7fb-c22d5f998827">PurchaseRailcard Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/6e9c80cd-5278-0776-b896-d5c5f8905b22.htm" title="PurchaseRailcardReplacement Method " tocid="6e9c80cd-5278-0776-b896-d5c5f8905b22">PurchaseRailcardReplacement Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/f00ac7fb-83ac-1ba2-0894-4989941db55c.htm" title="PurchaseRangerRover Method " tocid="f00ac7fb-83ac-1ba2-0894-4989941db55c">PurchaseRangerRover Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/93ef7761-a2c3-8e94-f314-c5384add38b7.htm" title="PurchaseReservation Method " tocid="93ef7761-a2c3-8e94-f314-c5384add38b7">PurchaseReservation Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/24cab9ae-9808-57fe-614f-fb9e9dd3ea58.htm" title="PurchaseSeasonTicket Method " tocid="24cab9ae-9808-57fe-614f-fb9e9dd3ea58">PurchaseSeasonTicket Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/dc5478c8-7d00-a722-210a-773d0c20b5cd.htm" title="PurchaseTicket3 Method " tocid="dc5478c8-7d00-a722-210a-773d0c20b5cd">PurchaseTicket3 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/302a5b8d-3db1-01aa-b472-734b172f104a.htm" title="RedeemTravelPass Method " tocid="302a5b8d-3db1-01aa-b472-734b172f104a">RedeemTravelPass Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/f2d14251-944f-0ec1-c8da-8c3e8459353f.htm" title="Refund Method " tocid="f2d14251-944f-0ec1-c8da-8c3e8459353f">Refund Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/da044df7-8419-6f44-c5c5-1ab642a170d1.htm" title="RefundUpdate Method " tocid="da044df7-8419-6f44-c5c5-1ab642a170d1">RefundUpdate Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/368ca0c5-c517-b418-22d3-a19cf5058db6.htm" title="RegisterPrintServer Method " tocid="368ca0c5-c517-b418-22d3-a19cf5058db6">RegisterPrintServer Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/ad75b284-49cf-f5c7-8a4b-7b4eabf2c252.htm" title="RegisterTomPrinter Method " tocid="ad75b284-49cf-f5c7-8a4b-7b4eabf2c252">RegisterTomPrinter Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/68ebcfd1-f7c1-ce58-e70b-87528b8de16a.htm" title="Reissue Method " tocid="68ebcfd1-f7c1-ce58-e70b-87528b8de16a">Reissue Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/82009399-670a-dd1c-40e4-2f37da03a812.htm" title="RejectRefund Method " tocid="82009399-670a-dd1c-40e4-2f37da03a812">RejectRefund Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/8e05489b-20fb-7f79-1404-2f87c0fb9a57.htm" title="RequestItinerary Method " tocid="8e05489b-20fb-7f79-1404-2f87c0fb9a57">RequestItinerary Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/da85e34f-d61d-84ea-d81f-9e118c0518d5.htm" title="RequestRailcardReplacement Method " tocid="da85e34f-d61d-84ea-d81f-9e118c0518d5">RequestRailcardReplacement Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/aa5a200d-2054-0bee-7a09-2f92f39fc41f.htm" title="RequestSeasonTicketChangeoverPurchase Method " tocid="aa5a200d-2054-0bee-7a09-2f92f39fc41f">RequestSeasonTicketChangeoverPurchase Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/9265d4a2-151b-12bc-dfe9-50e28edc2627.htm" title="RequestSeasonTicketChangeoverRefund Method " tocid="9265d4a2-151b-12bc-dfe9-50e28edc2627">RequestSeasonTicketChangeoverRefund Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/44c78355-29e0-fbed-1b86-41171d1d23a4.htm" title="ReservationBooking Method " tocid="44c78355-29e0-fbed-1b86-41171d1d23a4">ReservationBooking Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/f5e07dcd-b0a3-db82-85b5-f885ba6b66f7.htm" title="ReservationBooking2 Method " tocid="f5e07dcd-b0a3-db82-85b5-f885ba6b66f7">ReservationBooking2 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/58bcab27-940e-681e-f7f5-5bbebc23fb8d.htm" title="SearchCustomerProfile Method " tocid="58bcab27-940e-681e-f7f5-5bbebc23fb8d">SearchCustomerProfile Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/33705698-497c-2a82-7938-2518b5458220.htm" title="SeasonTicketDuplicate Method " tocid="33705698-497c-2a82-7938-2518b5458220">SeasonTicketDuplicate Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/e0f84c45-07fa-2539-0e2d-4264c9dfdbf9.htm" title="SeasonTicketReissue Method " tocid="e0f84c45-07fa-2539-0e2d-4264c9dfdbf9">SeasonTicketReissue Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/5c962ea2-e7f7-0a8b-7098-68141ec037e1.htm" title="SeasonTicketReplacement Method " tocid="5c962ea2-e7f7-0a8b-7098-68141ec037e1">SeasonTicketReplacement Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/06239abb-8578-bf03-d082-1591390a057a.htm" title="UpdateCustomerProfile Method " tocid="06239abb-8578-bf03-d082-1591390a057a">UpdateCustomerProfile Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/dbf530e2-2ec3-f6fc-3e13-38f1da973966.htm" title="ValidateRefund Method " tocid="dbf530e2-2ec3-f6fc-3e13-38f1da973966">ValidateRefund Method </a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>CbeTOService<span id="LSTD6987D2A_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD6987D2A_0?cpp=::|nu=.");</script>CalculateRefundValue Method </h1></td></tr></table><span class="introStyle"></span> <div class="summary"><p>
                This FEWS enables the Operator to request an automated calculation of the refund value for season tickets or
                point to point tickets using a refund type code (see notes below). The record is locked when this request is made
                to the CBE. The refund types codes are set by the operator to be used to determine how the refund is
                calculated by the CBE. The codes are provided in the notes below and cover:
                <ol><li>Unused or part used P2P refunds, </li><li>P2P delay repay refunds, </li><li>season ticket part unused refunds</li><li>season ticket delay repay refunds</li><li>rover and ranger refunds</li><li>plusbus refunds</li><li>previously changed over season ticket requests for refunds</li><li>car park refunds</li><li>day travelcard refunds</li><li>group ticket refunds</li><li>incomplete journey refunds</li></ol></p><p>
                The call also allows an operator to enter the of a refund for a car parking ticket, as this is a manual calculation.
            </p></div><p> </p>
    <strong>Namespace:</strong> 
   <a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService</a><br />
    <strong>Assembly:</strong>
   Vix.Cbe.WebService (in Vix.Cbe.WebService.dll) Version: 0.1.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EACA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">[<span class="identifier">PerformanceCounterAttribute</span>(<span class="keyword">true</span>, <span class="keyword">typeof</span>(<span class="identifier">ServiceMethodPerformanceCounter</span>), "CBE-Operation.V7", 
	"TicketOffice-CalculateRefundValue", Target = <span class="identifier">CbeActivity</span>.CalculateRefundValue)]
<span class="keyword">public</span> <span class="identifier">Task</span>&lt;<span class="identifier">CalculateRefundValueMessageResponseV1</span>&gt; <span class="identifier">CalculateRefundValue</span>(
	<span class="identifier">CalculateRefundValueMessageRequestAuthV1</span> <span class="parameter">request</span>
)</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">request</span></dt><dd>Type: <a href="cca91a8d-322b-0875-16d1-e62a5bf3fcf9.htm">Vix.Cbe.WebService.Contracts.SalesTransaction<span id="LSTD6987D2A_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD6987D2A_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CalculateRefundValueMessageRequestAuthV1</a><br />The request.</dd></dl><h4 class="subHeading">Return Value</h4>Type: <a href="https://docs.microsoft.com/dotnet/api/system.threading.tasks.task-1" target="_blank" rel="noopener noreferrer">Task</a><span id="LSTD6987D2A_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD6987D2A_2?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script><a href="fa33e1b0-9ea5-e0b9-918a-358b66b1a27a.htm">CalculateRefundValueMessageResponseV1</a><span id="LSTD6987D2A_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD6987D2A_3?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script><br />
            Refund value wrapped in a response contract.
            <h4 class="subHeading">Implements</h4><a href="53fb8207-4949-8bc2-3ebc-4406936712d7.htm">ICbeTOService<span id="LSTD6987D2A_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD6987D2A_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CalculateRefundValue(CalculateRefundValueMessageRequestAuthV1)</a><br /></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Remarks</span></div><div id="ID3RBSection" class="collapsibleSection"><p><b>BACKGROUND</b></p><p>
      This FEWS enables the Operator to request an automated calculation of the refund value for season tickets or point to point tickets using a refund type code, the record is locked when this request is made to the CBE.
    </p><p><b>BUSINESS PROCESS CONTEXT</b></p><img src="\Content\FEWS 9.1.1 Calculate Refund Value\Context.jpg" /><p><b>PROCESS DIAGRAM</b></p><p>
      Not required.
    </p><p><b>PROCESS DESCRIPTION</b></p><p>
      This call from a ticket office or telesales/ call centre (attended TIS), requires the operator to select a refund type code which is used by the CBE to calculate the refund.   The refund type codes which are supported are listed in the appendix in section 7. These codes cover all the refund calculations applicable to the various refunds: 
      <ol><li>Unused or part used P2P refunds, </li><li>P2P delay repay refunds, </li><li>season ticket part unused refunds</li><li>season ticket delay repay refunds</li><li>rover and ranger refunds</li><li>plusbus refunds</li><li>previously changed over season ticket requests for refunds</li><li>day travelcard refunds</li></ol></p><p>
      The refund record is already locked by the previous FEWS 9.1 call and the CBE completes the calculation and returns the refund value for the ticket being refunded in the output.  The CBE uses the refund reference provided on input to identify the transaction record and find the details associated with the ticket number, so that it can find the fare for refund. The CBE calculates the Refund Value for Ticket being refunded and leaves the refund state at ‘in progress’.
    </p><p>
      If the output from this FEWS has a zero for refund value then this means the CBE cannot find a suitable fare and a list of fare choice details is provided for the operator to select from.  In case when right fare cannot be found for refund type codes 004, 102, 106, 302, the refund will be automatically rejected and no list of possible fares will be available, this applies for other refund types in the unlikely case of fare ambiguity or no possible fare. This is expected to be an exceptional case but is included for completion; it may need to be handled manually by the operator outside the CBE refund process.  
    </p><p>
      Depending on the use already made of the ticket, there is no guarantee that any refund will be due. For example Annual Season tickets will usually have no refund value after 10 ½ months’ use.
    </p><p><b>ASSUMPTIONS</b></p><p><ol><li>
          It is assumed that the output showing the refund value calculated by the CBE is provided for information only to the FEA. 
        </li><li>
          The FEA may wish to prevent part used 7 day plusbus season tickets from being refunded as these will invariably be rejected as having no value. 
        </li><li>
          The FEA will decide how to display negative refunds to the operator, so that the operator knows that no refund is available and then rejects the refund in FEWS 9.2.   
        </li><li>
          This FEWS only supports changeover season ticket refunds previously sold by the CBE as the complete sales history is required to calculate the refund. 
        </li><li>
          It is assumed that when the CBE output includes fares choice details the trained operator will then call FEWS 9.1.3 have selected a fare from the output above which is appropriate to be used for refund calculation. 
        </li><li>
          This FEWS assumes that a trained operator is able to determine a suitable compensation value in the case or an incomplete journey on the inbound leg of a return ticket (where outbound flag is FALSE); for incomplete journey on the outbound leg the whole ticket would be refunded.
        </li></ol></p><p><b>VALIDATIONS</b></p><p><ul><li><b>Parameter validation:</b><ol><li>None</li></ol></li><li><b>Business validation:</b><ol><li>
              All mandatory fields are present
            </li><li>
              Operator (User credentials) exists and has refund administration rights
            </li><li>
              Refund Number exists
            </li><li>
              Refund Type Code exists and is valid for ticket type (season or Point to Point ticket, travelcard etc), ,  and valid for Refund category type value as follows:  
              <ol><li>
                  Where the ticket type is P2P anytime, off peak or advance the refund type code must be &lt; 100 and refund category type  value is either P2P delay repay or P2P other  
                </li><li>
                  If the refund type code is 001-004, then the refund record must have the refund category type value set to P2P other. 
                </li><li>
                  If the refund type code is 005 – 009 then the refund record must have the refund category type  value set to P2P delay repay
                </li><li>
                  If the refund type code is 010 then the refund category type must be Incomplete journey refund (P2P)
                </li><li>
                  Where the ticket type is season ticket the refund type code must be &gt;= 100 and refund category type  value is either season ticket refund other or season ticket delay repay 
                </li><li>
                  If the refund type code is 104, or 105, then the refund record must have the refund category type value set to season ticket delay repay. 
                </li><li>
                  If the refund type code is 100 – 103 then the refund record must have the refund category type  value set to season ticket refund other
                </li><li>
                  If the refund type code is 106 then the refund category type must be Changed season ticket refund. 
                </li><li>
                  Where the ticket type is a one day Travelcard the refund type code must be 400. 
                </li><li>
                  If the refund type code is 400 (day travelcard) then check that the refund category type is day travelcard. 
                </li><li>
                  Where the ticket type is a groupsave or DUO the refund type code must be 500.
                </li><li>
                  If the refund type code is 500 then the refund category type must be Groupsave/DUO full refund
                </li><li>
                  If the refund type code is 500 check that the refund record has the Isgroupticket flag set to TRUE
                </li><li>
                  If the refund type code is 500 check that the number of ticket refund details matches the number of passengers/tickets in the group.  
                </li><li>
                  If refund type code is 600 check that ticket is car parking. 
                </li><li>
				  Only FullRefund (ST_100) or PartialRefund (ST_101) is allowed for flexi season.
				</li><li>
				  Refund for flexi season is not allowed once all flexi passes were redeemed already.
				</li><li>
				  Full Refund for flexi season is not allowed when some of the flexi passes were redeemed already.
				</li></ol></li><li>
              Check Ticket Number or Passenger Fare Id  belongs to the correct refund record.
            </li><li>
              Number of days is present for required refund type code (see note 3)
            </li><li>
              If selected, number of days must be between 1 and total business days of a season ticket period 
            </li><li>
              Check if record has already been locked for another operator
            </li><li>
              Refund From Date must be greater or equal to Ticket Start Date for required refund type code (see note 4)
            </li><li>
              Check the operator/user credentials has permission for this call
            </li><li>
              Check if record is allocated as previously locked in FEWS 9.1 (11)
            </li><li>
              Check the TicketDetails are not empty. (12)
            </li><li>
              Check that for season tickets where the PoV is a month or more (not annual), has seven or more days validity remaining before it expires. For a weekly season ticket there must be at least 3 or more days’ validity before it expires. (See notes) 
            </li><li>
              Check that for annual season tickets refunds (not plusbus) there should be more than 1.5 months validity before it expires. (See notes below)   
            </li><li>
              Check that if any of the ticket details have associated plusbus tickets sales in the sales transaction that these are included in the ticket details for refund. (See notes).  
            </li><li>
              Check that the refund state is either InProgress or CalculationComplete
            </li><li>
              Where the Refund Type  is 003, 004 or 102 check that the ticket type is a first class ticket.
            </li><li>
              Where compensation value is provided confirm that refund type code is 010 AND the outboundjourney flag is FALSE (meaning applies to inbound leg only).
            </li><li>
              If refund type code is 010 compensation value must be present where Outboundflag is FALSE.   
            </li><li>
              If GroupCompensationValue is present check that the refund type code if 501 AND the outboundjourney flag is FALSE (meaning applies to inbound leg only).
            </li><li>
              If refund type code 501 then GroupCompensationValue must be present where Outboundflag is FALSE.
            </li><li>
              There cannot be both CompensationValue and GroupCompensationValue present in the input.
            </li><li>
              If GroupCompensationValue is present check that the IsGroupRefund Flag is set to TRUE in the refund record. 
            </li><li>
              If refund type code is 600 car parking then car parking refund value must be present (see note below).
            </li><li>
              If refund type code is (CP) 600 then check that car parking refund value is present.  check that. 
            </li></ol></li></ul></p><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Examples</span></div><div id="ID2RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EABABBA_tab1" class="codeSnippetContainerTabSingle">Example CalculateRefundValue Request</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EABABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EABABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EABABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:soapenv</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span> <span class="highlight-xml-attribute-name">xmlns:ns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span><span class="highlight-xml-bracket">&gt;</span>
   <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:UserCredentials</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:UserName</span><span class="highlight-xml-bracket">&gt;</span>TSawyer<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:UserName</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:Password</span><span class="highlight-xml-bracket">&gt;</span>password<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:Password</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:UserCredentials</span><span class="highlight-xml-bracket">&gt;</span>
   <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Header</span><span class="highlight-xml-bracket">&gt;</span>
   <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:CalculateRefundValueRequest</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundNumber</span><span class="highlight-xml-bracket">&gt;</span>17RFV09V6J<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundNumber</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TicketDetails</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundCalculationTicketDetails</span><span class="highlight-xml-bracket">&gt;</span>
               <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:TicketNumber</span><span class="highlight-xml-bracket">&gt;</span>183<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:TicketNumber</span><span class="highlight-xml-bracket">&gt;</span>
               <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ns:RefundTypeCode</span><span class="highlight-xml-bracket">&gt;</span>P2P_001<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundTypeCode</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:RefundCalculationTicketDetails</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:TicketDetails</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ns:CalculateRefundValueRequest</span><span class="highlight-xml-bracket">&gt;</span>
   <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">soapenv:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EABABBA");</script><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EAAABBA_tab1" class="codeSnippetContainerTabSingle">Example CalculateRefundValue Response</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAAABBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EAAABBA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Envelope</span> <span class="highlight-xml-attribute-name">xmlns:s</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://schemas.xmlsoap.org/soap/envelope/"</span><span class="highlight-xml-bracket">&gt;</span>
   <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">PerformanceInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>318<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CbeExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>0<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ExternalExecutionTime</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">PerformanceInformation</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">FewsInformation</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>9.1.1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">ReferenceNumber</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Revision</span> <span class="highlight-xml-attribute-name">i:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span><span class="highlight-xml-bracket">/&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>19.1<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">Version</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">FewsInformation</span><span class="highlight-xml-bracket">&gt;</span>
   <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Header</span><span class="highlight-xml-bracket">&gt;</span>
   <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
      <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CalculateRefundValueResponse</span> <span class="highlight-xml-attribute-name">xmlns</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://vixtechnology.com/cbe/2012-05-29"</span> <span class="highlight-xml-attribute-name">xmlns:i</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">RefundNumber</span><span class="highlight-xml-bracket">&gt;</span>17RFV09V6J<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">RefundNumber</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">RefundStatus</span><span class="highlight-xml-bracket">&gt;</span>CalculationComplete<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">RefundStatus</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">RefundSubStatus</span> <span class="highlight-xml-attribute-name">i:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span><span class="highlight-xml-bracket">/&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">TicketDetails</span><span class="highlight-xml-bracket">&gt;</span>
            <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">RefundValueTicketDetails</span><span class="highlight-xml-bracket">&gt;</span>
               <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">TicketNumber</span><span class="highlight-xml-bracket">&gt;</span>183<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">TicketNumber</span><span class="highlight-xml-bracket">&gt;</span>
               <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">PassengerFareId</span><span class="highlight-xml-bracket">&gt;</span>0<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">PassengerFareId</span><span class="highlight-xml-bracket">&gt;</span>
               <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">RefundValue</span><span class="highlight-xml-bracket">&gt;</span>7700<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">RefundValue</span><span class="highlight-xml-bracket">&gt;</span>
               <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">DiscountedRefundValue</span><span class="highlight-xml-bracket">&gt;</span>6900<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">DiscountedRefundValue</span><span class="highlight-xml-bracket">&gt;</span>
               <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CompensationValue</span><span class="highlight-xml-bracket">&gt;</span>0<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CompensationValue</span><span class="highlight-xml-bracket">&gt;</span>
               <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">CarParkingRefundValue</span><span class="highlight-xml-bracket">&gt;</span>0<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CarParkingRefundValue</span><span class="highlight-xml-bracket">&gt;</span>
               <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">FareChoiceDetails</span> <span class="highlight-xml-attribute-name">i:nil</span><span class="highlight-xml-attribute-equal">=</span><span class="highlight-xml-attribute-value">"true"</span><span class="highlight-xml-bracket">/&gt;</span>
            <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">RefundValueTicketDetails</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">TicketDetails</span><span class="highlight-xml-bracket">&gt;</span>
         <span class="highlight-xml-bracket">&lt;</span><span class="highlight-xml-tag">RefundAgentAdditionalDetailList</span><span class="highlight-xml-bracket">/&gt;</span>
      <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">CalculateRefundValueResponse</span><span class="highlight-xml-bracket">&gt;</span>
   <span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Body</span><span class="highlight-xml-bracket">&gt;</span>
<span class="highlight-xml-bracket">&lt;/</span><span class="highlight-xml-tag">s:Envelope</span><span class="highlight-xml-bracket">&gt;</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABBA");</script></div></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Revision History</span></div><div id="ID4RBSection" class="collapsibleSection"><table><tr><th>Date</th><th>Version</th><th>Description</th></tr><tr><td>05/09/2017</td><td>19.0</td><td>FEWS 9.1.1 Calculate Refund Value</td></tr><tr><td>29/11/2019</td><td>19.1</td><td>Updated to support calculation of discounted refund values for local promotions and split-tickst discounted fares</td></tr><tr><td>03/03/2020</td><td>19.2</td><td>Updated to support ADR compensation amount in calculation</td></tr><tr><td>21/05/2021</td><td>19.3</td><td>Added refund calculation for flexi season and the validations</td></tr></table></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID5RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="84478d73-23dd-1bcd-02c4-86dcf17efc65.htm">CbeTOService Class</a></div><div class="seeAlsoStyle"><a href="26210088-6c4f-d952-a0af-51ddaeac4a15.htm">Vix.Cbe.WebService Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>